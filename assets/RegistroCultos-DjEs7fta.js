import{s as te,P as n,B as c,o as _,f as S,w as t,b as e,c as k,j as g,a as f,d as r,u as m,dp as ie,dq as I,dr as de,D as ne,H as me,E as ce,G as pe,I as fe,F as ve}from"./index-B488NoJ8.js";import{S as Z}from"./sweetalert2.all-B4zcRVGv.js";import{V as _e,c as ge}from"./VCard-CVQS5OrG.js";import{a as P,V as u}from"./VRow-DQSaPiAw.js";import{V as d}from"./VLabel-CJaBhEt3.js";import{V as L}from"./VAutocomplete-DJFKAKHT.js";import{V as T}from"./VProgressCircular-Bq-4ide7.js";import{V as Ve}from"./VSelect-DyaadiU-.js";import{V as v}from"./VTextField-64HsPLbM.js";import{V as ee}from"./VDivider-udgox8UB.js";import{V as E}from"./VBtn-CkAG_BNA.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{B as ye}from"./BaseBreadcrumb-y1wYdYG_.js";import"./useRender-s691cne0.js";import"./VAvatar-D7EAcEBf.js";import"./router-BGurXeCU.js";import"./transition-BmRQpJWb.js";import"./filter-jluJq8YT.js";import"./VInput-Cpf1c0wj.js";import"./index-viztqhV0.js";import"./forwardRefs-D3j0TLhE.js";import"./VList-BNZmtjMY.js";import"./ssrBoot-Dt3V6zQa.js";import"./VMenu-0FRKnTtZ.js";import"./VOverlay-Qwfx9Wxz.js";import"./lazy-B4HAjbdi.js";import"./dialog-transition-DexDhYKP.js";import"./VCheckboxBtn-DOqWKmEV.js";import"./VSelectionControl-BdqupJWk.js";import"./VChip-zVIeI1ct.js";import"./VSlideGroup-wXEr_Fyq.js";import"./group-Db5reGfL.js";import"./resizeObserver-ZPXnmWkY.js";import"./VField-u3NpeqY2.js";const D=y=>(ce("data-v-4273b60d"),y=y(),pe(),y),be={key:0,class:"loading-spinner"},xe=D(()=>f("div",{class:"spinner"},null,-1)),we=D(()=>f("p",null,"Carregando, por favor aguarde...",-1)),Ce=[xe,we],Ie=D(()=>f("h4",{class:"text-h4"},"Lançamento de Culto",-1)),ke=D(()=>f("div",{class:"text-subtitle-1 text-grey100 mt-2"},"Preencha as informações do culto abaixo!",-1)),Be={class:"mt-6"},Se={class:"d-flex"},De={key:0,class:"ml-5"},Fe={class:"d-flex"},Re={key:0,class:"ml-5"},ze={class:"d-flex"},Ue={key:0,class:"ml-5"},Ne={class:"d-flex justify-end mt-5 pb-3"},qe=te({__name:"RegistroCultos",setup(y){const s=ne(),F=me();fe();const R=n({get:()=>s.state.cultos.culto.quem_pregou,set:o=>s.state.cultos.culto.quem_pregou=o}),z=n({get:()=>s.state.cultos.culto.diacono_01,set:o=>s.state.cultos.culto.diacono_01=o}),O=n({get:()=>s.state.cultos.culto.diacono_02,set:o=>s.state.cultos.culto.diacono_02=o}),b=n({get:()=>s.state.cultos.culto.dizimos,set:o=>s.state.cultos.culto.dizimos=o}),x=n({get:()=>s.state.cultos.culto.ofertas_gerais,set:o=>s.state.cultos.culto.ofertas_gerais=o}),w=n({get:()=>s.state.cultos.culto.doacoes_especiais,set:o=>s.state.cultos.culto.doacoes_especiais=o}),C=n({get:()=>s.state.cultos.culto.outras_entradas,set:o=>s.state.cultos.culto.outras_entradas=o}),V=n({get:()=>s.state.cultos.culto.ofertas_celulas,set:o=>s.state.cultos.culto.ofertas_celulas=o}),j=n({get:()=>s.state.cultos.culto.dia_semana,set:o=>s.state.cultos.culto.dia_semana=o}),H=n({get:()=>s.state.cultos.culto.horario,set:o=>s.state.cultos.culto.horario=o}),Q=n({get:()=>s.state.cultos.culto.criancas_apresentadas,set:o=>s.state.cultos.culto.criancas_apresentadas=o}),G=n({get:()=>s.state.cultos.culto.novos_convidados,set:o=>s.state.cultos.culto.novos_convidados=o}),U=n({get:()=>s.state.cultos.culto.valor_total,set:o=>s.state.cultos.culto.valor_total=o}),ae=c(["Segunda","Terca","Quarta","Quinta","Sexta","Sabado","Domingo"]);var p=c([]);const i=c(!1),A=c("");var p=c([]);const N=o=>{const a=o.target;A.value=a.value,p.value=[],i.value=!0,s.dispatch("pessoas/getListaPessoa",A.value).then(l=>{const $=l.data.listaPessoas.map(B=>({nr_sequencial:B.nr_sequencial,nome_pessoa:B.nome_pessoa}));console.log(p),p.value=$,i.value=!1}).catch(()=>{i.value=!1}),i.value=!1};c(F.params.id_grupo),s.dispatch("cultos/getOfertasCelulas").then(o=>{console.log(o.data[0].ofertas),V.value=h(o.data[0].ofertas)});const q=c(null),J=c(!1);var p=c([]);c("");function h(o){let a=o.replace(/\D/g,"");a=(parseFloat(a)/100).toFixed(2).toString();const l=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat(a));return setTimeout(()=>{oe()},0),l.replace("R$ ","").trim()}function oe(){var K,M,W,X,Y;const o=parseFloat(((K=b.value)==null?void 0:K.replace(/\D/g,""))||0)/100,a=parseFloat(((M=x.value)==null?void 0:M.replace(/\D/g,""))||0)/100,l=parseFloat(((W=w.value)==null?void 0:W.replace(/\D/g,""))||0)/100,$=parseFloat(((X=C.value)==null?void 0:X.replace(/\D/g,""))||0)/100,B=parseFloat(((Y=V.value)==null?void 0:Y.replace(/\D/g,""))||0)/100,ue=o+a+l+$+B;U.value=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(ue).replace("R$ ","").trim()}function le(){q.value&&q.value.click()}function se(o){const a=o.target;if(a&&a.files){const l=a.files;s.commit("cultos/setUploadFile",l)}else console.error("Nenhum arquivo inserido")}function re(){J.value=!0,s.dispatch("cultos/registrarCulto").then(o=>{o.data&&(J.value=!1,Z.fire({title:"Sucesso!",text:"Culto cadastrado com sucesso",icon:"success",timer:2e3,showConfirmButton:!1}))}).catch(o=>{Z.fire({title:"Error!",text:"Erro ao registrar culto!",icon:"error",timer:2e3,showConfirmButton:!1})})}return(o,a)=>(_(),S(P,{class:""},{default:t(()=>[e(u,{cols:"12",md:"12"},{default:t(()=>[i.value?(_(),k("div",be,Ce)):g("",!0),e(_e,{elevation:"10"},{default:t(()=>[e(ge,null,{default:t(()=>[Ie,ke,f("div",Be,[e(P,null,{default:t(()=>[e(u,{cols:"12",md:"12"},{default:t(()=>[e(d,{class:"mb-2 font-weight-medium",for:"dob"},{default:t(()=>[r("Quem pregou:")]),_:1}),f("div",Se,[e(L,{modelValue:R.value,"onUpdate:modelValue":a[0]||(a[0]=l=>R.value=l),label:"Buscar nome de quem pregou",items:m(p),color:"primary",variant:"outlined","hide-details":"",onInput:N,"item-title":"nome_pessoa",loading:i.value},{"append-item":t(()=>[i.value?(_(),S(T,{key:0,class:"ml-5",indeterminate:"",color:"primary"})):g("",!0)]),"no-data":t(()=>[!i.value&&m(p).length===0?(_(),k("div",De,"Nenhum dado encontrado")):g("",!0)]),_:1},8,["modelValue","items","loading"])])]),_:1}),e(u,{cols:"12",md:"6"},{default:t(()=>[e(d,{class:"mb-0 font-weight-medium"},{default:t(()=>[r("Dia da Semana:")]),_:1}),e(Ve,{modelValue:j.value,"onUpdate:modelValue":a[1]||(a[1]=l=>j.value=l),items:ae.value,label:"Selecione o dia que foi realizado",multiple:"","persistent-hint":""},null,8,["modelValue","items"])]),_:1}),e(u,{cols:"12",md:"6"},{default:t(()=>[e(d,{class:"mb-0 font-weight-medium"},{default:t(()=>[r("Horário:")]),_:1}),e(v,{modelValue:H.value,"onUpdate:modelValue":a[2]||(a[2]=l=>H.value=l),variant:"outlined",placeholder:"hh:mm",id:"fctime",type:"time",color:"primary"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:t(()=>[e(d,{class:"mb-2 font-weight-medium"},{default:t(()=>[r("Total de novos convidados:")]),_:1}),e(v,{color:"primary",variant:"outlined",type:"number","hide-details":"",modelValue:G.value,"onUpdate:modelValue":a[3]||(a[3]=l=>G.value=l)},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:t(()=>[e(d,{class:"mb-2 font-weight-medium"},{default:t(()=>[r("Total de crianças apresentadas:")]),_:1}),e(v,{color:"primary",variant:"outlined",type:"number","hide-details":"",modelValue:Q.value,"onUpdate:modelValue":a[4]||(a[4]=l=>Q.value=l)},null,8,["modelValue"])]),_:1}),e(ee),e(u,{cols:"12",md:"6"},{default:t(()=>[e(d,{class:"mb-2 font-weight-medium"},{default:t(()=>[r("Dízimos:")]),_:1}),e(v,{color:"primary",variant:"outlined",type:"text","hide-details":"",modelValue:b.value,"onUpdate:modelValue":a[5]||(a[5]=l=>b.value=l),onInput:a[6]||(a[6]=l=>b.value=h(b.value))},{"prepend-inner":t(()=>[e(m(ie),{"troke-width":"1.5",size:"22",class:"text-medium-emphasis"})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:t(()=>[e(d,{class:"mb-2 font-weight-medium"},{default:t(()=>[r("Ofertas Gerais:")]),_:1}),e(v,{color:"primary",variant:"outlined",type:"text","hide-details":"",modelValue:x.value,"onUpdate:modelValue":a[7]||(a[7]=l=>x.value=l),onInput:a[8]||(a[8]=l=>x.value=h(x.value))},{"prepend-inner":t(()=>[e(m(I),{"troke-width":"1.5",size:"22",class:"text-medium-emphasis"})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:t(()=>[e(d,{class:"mb-2 font-weight-medium"},{default:t(()=>[r("Doações Especiais:")]),_:1}),e(v,{color:"primary",variant:"outlined",type:"text","hide-details":"",modelValue:w.value,"onUpdate:modelValue":a[9]||(a[9]=l=>w.value=l),onInput:a[10]||(a[10]=l=>w.value=h(w.value))},{"prepend-inner":t(()=>[e(m(I),{"troke-width":"1.5",size:"22",class:"text-medium-emphasis"})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:t(()=>[e(d,{class:"mb-2 font-weight-medium"},{default:t(()=>[r("Outras Entradas:")]),_:1}),e(v,{color:"primary",variant:"outlined",type:"text","hide-details":"",modelValue:C.value,"onUpdate:modelValue":a[11]||(a[11]=l=>C.value=l),onInput:a[12]||(a[12]=l=>C.value=h(C.value))},{"prepend-inner":t(()=>[e(m(I),{"troke-width":"1.5",size:"22",class:"text-medium-emphasis"})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:t(()=>[e(d,{class:"mb-2 font-weight-medium"},{default:t(()=>[r("Ofertas Células:")]),_:1}),e(v,{color:"primary",variant:"outlined",type:"text","hide-details":"",modelValue:V.value,"onUpdate:modelValue":a[13]||(a[13]=l=>V.value=l),onInput:a[14]||(a[14]=l=>V.value=h(V.value))},{"prepend-inner":t(()=>[e(m(I),{"troke-width":"1.5",size:"22",class:"text-medium-emphasis"})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:t(()=>[e(d,{class:"mb-2 font-weight-medium"},{default:t(()=>[r("Total:")]),_:1}),e(v,{color:"primary",variant:"outlined",type:"text",disabled:"","hide-details":"",modelValue:U.value,"onUpdate:modelValue":a[15]||(a[15]=l=>U.value=l)},{"prepend-inner":t(()=>[e(m(I),{"troke-width":"1.5",size:"22",class:"text-medium-emphasis"})]),_:1},8,["modelValue"])]),_:1}),e(ee),e(u,{cols:"12",md:"12"},{default:t(()=>[e(d,{class:"mb-2 font-weight-medium",for:"dob"},{default:t(()=>[r("Primeiro Diácono:")]),_:1}),f("div",Fe,[e(L,{modelValue:z.value,"onUpdate:modelValue":a[16]||(a[16]=l=>z.value=l),label:"Buscar Nome do diacono",items:m(p),color:"primary",variant:"outlined","hide-details":"",onInput:N,"item-title":"nome_pessoa",loading:i.value},{"append-item":t(()=>[i.value?(_(),S(T,{key:0,class:"ml-5",indeterminate:"",color:"primary"})):g("",!0)]),"no-data":t(()=>[!i.value&&m(p).length===0?(_(),k("div",Re,"Nenhum dado encontrado")):g("",!0)]),_:1},8,["modelValue","items","loading"])])]),_:1}),e(u,{cols:"12",md:"12"},{default:t(()=>[e(d,{class:"mb-2 font-weight-medium",for:"dob"},{default:t(()=>[r("Segundo Diácono:")]),_:1}),f("div",ze,[e(L,{modelValue:O.value,"onUpdate:modelValue":a[17]||(a[17]=l=>O.value=l),label:"Buscar Nome do diacono",items:m(p),color:"primary",variant:"outlined","hide-details":"",onInput:N,"item-title":"nome_pessoa",loading:i.value},{"append-item":t(()=>[i.value?(_(),S(T,{key:0,class:"ml-5",indeterminate:"",color:"primary"})):g("",!0)]),"no-data":t(()=>[!i.value&&m(p).length===0?(_(),k("div",Ue,"Nenhum dado encontrado")):g("",!0)]),_:1},8,["modelValue","items","loading"])])]),_:1}),e(u,{col:"12",md:"12"},{default:t(()=>[e(d,{class:"mb-2 font-weight-medium mr-3",for:"camera-input"},{default:t(()=>[r("Capture uma foto:")]),_:1}),e(E,{onClick:le,color:"primary",icon:""},{default:t(()=>[e(m(de),{"stroke-width":"2.0",size:"24",class:"text-medium-emphasis mr-0 text-white"})]),_:1}),f("input",{ref_key:"cameraInput",ref:q,type:"file",accept:"image/*",capture:"",style:{display:"none"},onChange:se},null,544)]),_:1})]),_:1}),f("div",Ne,[e(E,{size:"large",color:"primary",rounded:"pill",class:"mr-4",onClick:re},{default:t(()=>[r("Salvar")]),_:1}),e(E,{size:"large",class:"bg-lighterror text-error",rounded:"pill"},{default:t(()=>[r("Cancelar")]),_:1})])])]),_:1})]),_:1})]),_:1})]),_:1}))}}),$e=he(qe,[["__scopeId","data-v-4273b60d"]]),gt=te({__name:"RegistroCultos",setup(y){c(null);const s=c({title:"Registro de Cultos"}),F=c([{text:"Início",disabled:!1,href:"#"},{text:"Registro de Cultos",disabled:!0,href:"#"}]);return(R,z)=>(_(),k(ve,null,[e(ye,{title:s.value.title,breadcrumbs:F.value},null,8,["title","breadcrumbs"]),e(P,{class:"justify-center"},{default:t(()=>[e(u,{cols:"12",md:"12"},{default:t(()=>[e($e)]),_:1})]),_:1})],64))}});export{gt as default};
