import{u as j,a as E}from"./uniqueId-BhxfeHmz.js";import{V as z}from"./VAvatar-DZJzuTrj.js";import{V as F}from"./VTooltip-B2XaGpFT.js";import{V as v}from"./VBtn-BQha6EUx.js";import{a as D,b as st}from"./VCard-CbYKzGYg.js";import{V as ot}from"./VTextField-BxXQly8i.js";import{s as q,I as N,o,c as r,b as t,w as a,a as s,t as d,d as _,l as U,F as T,q as A,j as L,r as $,f as C,u as tt,aD as et,aE as at,aF as ct,aG as rt,aH as dt,a2 as mt,K as ut}from"./index-C_f9P2-n.js";import{_ as lt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as nt}from"./VRow-D_3YoeAt.js";import{V as it}from"./VCol-C7dbO4M5.js";import{V as ft}from"./VMenu-DseH1U9K.js";import{e as pt,c as vt,a as ht}from"./VList-CrBNxGhP.js";import{V as _t}from"./VDivider-peG1M1Wz.js";import{V as gt}from"./VTextarea-CZzVFzTp.js";const yt={class:"d-flex gap-3 align-center"},bt=["src"],xt={class:"d-block d-sm-flex align-center gap-3"},kt={class:"text-h6"},Vt={class:"text-subtitle-2 opacity-50"},It={class:"py-3 text-body-1"},Ct={class:"my-1 d-flex align-center gap-3"},wt={class:"text-subtitle-1 font-weight-semibold"},zt={key:0,class:"ml-10"},$t={class:"d-flex gap-3 align-center"},Pt=["src"],Lt={class:"d-block d-sm-flex align-center gap-3"},Tt={class:"text-h6"},Rt={class:"text-subtitle-2 opacity-50"},St={class:"py-3 text-body-1"},Bt={key:1,class:"d-block d-sm-flex gap-3 align-center mb-5 ml-10"},Nt=["src"],Ut=q({__name:"Comments",props:{comments:Object||Array,postId:String},setup(e){const g=j(),m=e,u=N(""),y=async(M,x,w)=>{var n,V;const k={id:E("#REPLY_"),profile:{id:E("#REPLY_"),avatar:(n=m.comments)==null?void 0:n.profile.avatar,name:(V=m.comments)==null?void 0:V.profile.name,time:"now"},data:{comment:w,likes:{like:!1,value:0},replies:[]}};g.addReply(M,x,k),u.value=""},b=N(!1),O=()=>b.value=!b.value;return(M,x)=>{var n,V,P;const w=$("CircleIcon"),R=$("ThumbUpIcon"),k=$("ArrowBackUpIcon");return o(),r(T,null,[t(D,{variant:"flat",class:"mb-3 pa-5 border bg-surface"},{default:a(()=>{var l,f,c,p,S,B;return[s("div",yt,[t(z,{size:"30"},{default:a(()=>{var h;return[s("img",{src:(h=e.comments)==null?void 0:h.profile.avatar,width:"30",alt:"avatar"},null,8,bt)]}),_:1}),s("div",xt,[s("h6",kt,d((l=e.comments)==null?void 0:l.profile.name),1),s("span",Vt,[t(w,{size:"8",fill:"inherit",class:"opacity-50 mr-1"}),_(" "+d((f=e.comments)==null?void 0:f.profile.time),1)])])]),s("div",It,d((c=e.comments)==null?void 0:c.data.comment),1),s("div",Ct,[t(F,{text:"Like"},{activator:a(({props:h})=>[t(v,U({icon:"",color:"primary",variant:"flat",size:"x-small"},h),{default:a(()=>[t(R,{size:"16"})]),_:2},1040)]),_:1}),s("span",wt,d(((p=e.comments)==null?void 0:p.data)&&((S=e.comments)==null?void 0:S.data.likes)&&((B=e.comments)==null?void 0:B.data.likes.value)),1),t(F,{text:"Reply"},{activator:a(({props:h})=>[t(v,U({icon:"",color:"secondary",variant:"flat"},h,{size:"x-small",onClick:O}),{default:a(()=>[t(k,{size:"16"})]),_:2},1040)]),_:1})])]}),_:1}),(n=e.comments)!=null&&n.data.replies?(o(),r("div",zt,[(o(!0),r(T,null,A((V=e.comments)==null?void 0:V.data.replies,l=>(o(),r("div",null,[t(D,{variant:"flat",class:"mb-3 pa-5 border"},{default:a(()=>[s("div",$t,[t(z,{size:"30"},{default:a(()=>[s("img",{src:l.profile.avatar,width:"30",alt:"avatar"},null,8,Pt)]),_:2},1024),s("div",Lt,[s("h6",Tt,d(l.profile.name),1),s("span",Rt,[t(w,{size:"8",fill:"inherit",class:"opacity-50 mr-1"}),_(" "+d(l.profile.time),1)])])]),s("div",St,d(l.data.comment),1)]),_:2},1024)]))),256))])):L("",!0),b.value?(o(),r("div",Bt,[s("img",{src:(P=e.comments)==null?void 0:P.profile.avatar,width:"40",class:"flex-shrink-0 d-none d-sm-block",alt:"avatar"},null,8,Nt),t(ot,{variant:"outlined",color:"primary",modelValue:u.value,"onUpdate:modelValue":x[0]||(x[0]=l=>u.value=l),label:"Write Reply","hide-details":""},null,8,["modelValue"]),t(v,{color:"secondary",class:"mt-3 mt-sm-0",variant:"flat",size:"large",onClick:x[1]||(x[1]=l=>{var f;return y(e.postId,(f=e.comments)==null?void 0:f.id,u.value)})},{default:a(()=>[_(" Reply ")]),_:1})])):L("",!0)],64)}}}),At=lt(Ut,[["__scopeId","data-v-b702452b"]]),Mt={class:"d-flex gap-3 align-center"},Et=["src"],Ft={class:"d-block d-sm-flex align-center gap-3"},Dt={class:"text-h6"},Ot={class:"text-subtitle-2 opacity-50"},jt={class:"py-4 text-body-1"},qt=["src"],Yt={key:1,class:"rounded-md overflow-hidden my-5"},Gt=["src"],Ht={class:"my-4 mt-5 d-flex align-center gap-3"},Kt={class:"text-subtitle-1 font-weight-semibold"},Wt={class:"text-subtitle-1 font-weight-semibold"},Jt={key:0,class:"pa-5 pt-0"},Qt={key:1},Xt={class:"d-block d-sm-flex gap-3 align-center mb-4 px-4 pt-4"},Zt=["src"],te=q({__name:"PostItem",props:{post:Object||Array},setup(e){var w,R;const g=j(),m=e,u=N(!((w=m.post)!=null&&w.comments&&((R=m.post)==null?void 0:R.comments.length)>0)),y=N(""),b=N([{title:"Share Now",icon:at},{title:"Share to Friends",icon:rt},{title:"Send in Messanger",icon:et},{title:"Copy Link",icon:dt}]),O=()=>u.value=!u.value,M=async k=>{await g.likePost(k)},x=async(k,n)=>{var l,f;const P={id:E("#COMMENT_"),profile:{id:E("#COMMENT_"),avatar:(l=m.post)==null?void 0:l.profile.avatar,name:(f=m.post)==null?void 0:f.profile.name,time:"now"},data:{comment:n,likes:{like:!1,value:0},replies:[]}};g.addComment(k,P),y.value=""};return(k,n)=>{const V=$("CircleIcon"),P=$("ThumbUpIcon");return o(),C(D,{elevation:"10",class:"bg-surface"},{default:a(()=>{var l,f;return[t(st,null,{default:a(()=>{var c,p,S,B,h,Y,G,H,K,W,J;return[s("div",Mt,[t(z,{size:"40"},{default:a(()=>{var i;return[s("img",{src:(i=e.post)==null?void 0:i.profile.avatar,width:"40",alt:"avatar"},null,8,Et)]}),_:1}),s("div",Ft,[s("h6",Dt,d((c=e.post)==null?void 0:c.profile.name),1),s("span",Ot,[t(V,{size:"8",fill:"inherit",class:"opacity-50 mr-1"}),_(" "+d((p=e.post)==null?void 0:p.profile.time),1)])])]),s("div",jt,d((S=e.post)==null?void 0:S.data.content),1),(B=e.post)!=null&&B.data.images?(o(),C(nt,{key:0},{default:a(()=>{var i;return[(o(!0),r(T,null,A((i=e.post)==null?void 0:i.data.images,I=>(o(),C(it,{md:I.featured?"12":"6"},{default:a(()=>[t(z,{class:"rounded-md w-100",size:"360"},{default:a(()=>[s("img",{src:I.img,alt:"photo"},null,8,qt)]),_:2},1024)]),_:2},1032,["md"]))),256))]}),_:1})):L("",!0),(h=e.post)!=null&&h.data.video?(o(),r("div",Yt,[s("iframe",{src:`https://www.youtube.com/embed/${(Y=e.post)==null?void 0:Y.data.video}`,frameborder:"0",width:"100%",height:"400"},null,8,Gt)])):L("",!0),s("div",Ht,[t(F,{text:"Like"},{activator:a(({props:i})=>{var I,Q,X;return[t(v,U({onClick:n[0]||(n[0]=oe=>{var Z;return M(`${(Z=e.post)==null?void 0:Z.id}`)})},i,{icon:"",color:(I=e.post)!=null&&I.data&&((Q=e.post)!=null&&Q.data.likes)&&((X=e.post)!=null&&X.data.likes.like)?"primary":"grey100",variant:"flat",size:"x-small"}),{default:a(()=>[t(P,{size:"16"})]),_:2},1040,["color"])]}),_:1}),s("span",Kt,d(((G=e.post)==null?void 0:G.data)&&((H=e.post)==null?void 0:H.data.likes)&&((K=e.post)==null?void 0:K.data.likes.value)),1),t(F,{text:"Comment"},{activator:a(({props:i})=>[t(v,U({icon:""},i,{color:"secondary",variant:"flat",size:"x-small",onClick:O}),{default:a(()=>[t(tt(et),{size:"16"})]),_:2},1040)]),_:1}),s("span",Wt,d((W=e.post)!=null&&W.data.comments?(J=e.post)==null?void 0:J.data.comments.length:0),1),t(ft,null,{activator:a(({props:i})=>[t(v,U({icon:"",class:"ml-auto",variant:"text",size:"small"},i),{default:a(()=>[t(tt(at),{size:"16"})]),_:2},1040)]),default:a(()=>[t(pt,null,{default:a(()=>[(o(!0),r(T,null,A(b.value,(i,I)=>(o(),C(vt,{key:I,value:I},{prepend:a(()=>[(o(),C(ct(i.icon),{"stroke-width":"1.5",size:"20"}))]),default:a(()=>[t(ht,{class:"ml-3"},{default:a(()=>[_(d(i.title),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]}),_:1}),(l=e.post)!=null&&l.data.comments?(o(),r("div",Jt,[(o(!0),r(T,null,A((f=e.post)==null?void 0:f.data.comments,c=>{var p;return o(),r("div",null,[t(At,{comments:c,postId:(p=e.post)==null?void 0:p.id},null,8,["comments","postId"])])}),256))])):L("",!0),u.value?(o(),r("div",Qt,[t(_t),s("div",Xt,[t(z,{class:"flex-shrink-0 d-none d-sm-block",size:"33"},{default:a(()=>{var c;return[s("img",{src:(c=e.post)==null?void 0:c.profile.avatar,width:"33",alt:"avatar"},null,8,Zt)]}),_:1}),t(ot,{variant:"outlined",color:"primary",modelValue:y.value,"onUpdate:modelValue":n[1]||(n[1]=c=>y.value=c),placeholder:"Comment","hide-details":""},null,8,["modelValue"]),t(v,{color:"primary",disabled:y.value==="",class:"mt-3 mt-sm-0",size:"large",onClick:n[2]||(n[2]=c=>{var p;return x((p=e.post)==null?void 0:p.id,y.value)})},{default:a(()=>[_(" Comment ")]),_:1},8,["disabled"])])])):L("",!0)]}),_:1})}}}),ye=q({__name:"PostListing",setup(e){const g=j();mt(()=>{g.fetchPosts()});const m=ut(()=>g.posts);return(u,y)=>(o(),C(nt,{class:"mt-4"},{default:a(()=>[(o(!0),r(T,null,A(m.value,b=>(o(),C(it,{cols:"12",key:b.id},{default:a(()=>[t(te,{post:b},null,8,["post"])]),_:2},1024))),128))]),_:1}))}}),ee={},ae={class:"d-flex pb-2"};function se(e,g){const m=$("PhotoIcon"),u=$("NotebookIcon");return o(),C(D,{elevation:"10",class:"bg-surface"},{default:a(()=>[t(st,null,{default:a(()=>[t(gt,{elevation:"10",color:"primary",name:"input-7-4",placeholder:"Share your thoughts",rows:"5"}),s("div",ae,[t(z,{size:"32",color:"primary",class:"mr-2"},{default:a(()=>[t(m,{size:"16"})]),_:1}),t(v,{color:"inherit",type:"upload",variant:"plain",class:"opacity-1"},{default:a(()=>[_(" Photo / Video ")]),_:1}),t(v,{color:"inherit",variant:"plain",class:"opacity-1"},{default:a(()=>[t(z,{size:"32",color:"secondary",class:"mr-2"},{default:a(()=>[t(u,{size:"16"})]),_:1}),_(" Article ")]),_:1}),t(v,{class:"bg-primary ml-auto",size:"large"},{default:a(()=>[_("Post")]),_:1})])]),_:1})]),_:1})}const be=lt(ee,[["render",se]]);export{be as A,ye as _};
