import{m as R,V as T}from"./VToolbar-CIxPfPSF.js";import{m as x,a as E}from"./layout-h39Q5PQD.js";import{p as P,B as I,x as d,P as r,bU as L,O as S,a4 as k,bv as N,g as U,al as H,bJ as M,Y as w,b as z,l as C,aV as F}from"./index-BovjKzzn.js";import{u as O}from"./ssrBoot-Ckr4_PPe.js";import{u as Y}from"./useRender-DFrYBxSb.js";const q=P({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function J(e){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=b;let c=0;const t=I(null),l=d(0),i=d(0),u=d(0),m=d(!1),h=d(!1),s=r(()=>Number(e.scrollThreshold)),y=r(()=>L((s.value-l.value)/s.value||0)),v=()=>{const o=t.value;!o||n&&!n.value||(c=l.value,l.value="window"in o?o.pageYOffset:o.scrollTop,h.value=l.value<c,u.value=Math.abs(l.value-s.value))};return S(h,()=>{i.value=i.value||l.value}),S(m,()=>{i.value=0}),k(()=>{S(()=>e.scrollTarget,o=>{var g;const f=o?document.querySelector(o):window;f&&f!==t.value&&((g=t.value)==null||g.removeEventListener("scroll",v),t.value=f,t.value.addEventListener("scroll",v,{passive:!0}))},{immediate:!0})}),N(()=>{var o;(o=t.value)==null||o.removeEventListener("scroll",v)}),n&&S(n,v,{immediate:!0}),{scrollThreshold:s,currentScroll:l,currentThreshold:u,isScrollActive:m,scrollRatio:y,isScrollingUp:h,savedScroll:i}}const j=P({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...R(),...x(),...q(),height:{type:[Number,String],default:64}},"VAppBar"),X=U()({name:"VAppBar",props:j(),emits:{"update:modelValue":e=>!0},setup(e,b){let{slots:n}=b;const c=I(),t=H(e,"modelValue"),l=r(()=>{var p;const a=new Set(((p=e.scrollBehavior)==null?void 0:p.split(" "))??[]);return{hide:a.has("hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),i=r(()=>{const a=l.value;return a.hide||a.inverted||a.collapse||a.elevate||a.fadeImage||!t.value}),{currentScroll:u,scrollThreshold:m,isScrollingUp:h,scrollRatio:s}=J(e,{canScroll:i}),y=r(()=>e.collapse||l.value.collapse&&(l.value.inverted?s.value>0:s.value===0)),v=r(()=>e.flat||l.value.elevate&&(l.value.inverted?u.value>0:u.value===0)),o=r(()=>l.value.fadeImage?l.value.inverted?1-s.value:s.value:void 0),f=r(()=>{var B,V;if(l.value.hide&&l.value.inverted)return 0;const a=((B=c.value)==null?void 0:B.contentHeight)??0,p=((V=c.value)==null?void 0:V.extensionHeight)??0;return a+p});M(r(()=>!!e.scrollBehavior),()=>{F(()=>{l.value.hide?l.value.inverted?t.value=u.value>m.value:t.value=h.value||u.value<m.value:t.value=!0})});const{ssrBootStyles:g}=O(),{layoutItemStyles:A}=E({id:e.name,order:r(()=>parseInt(e.order,10)),position:w(e,"location"),layoutSize:f,elementSize:d(void 0),active:t,absolute:w(e,"absolute")});return Y(()=>{const a=T.filterProps(e);return z(T,C({ref:c,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...A.value,"--v-toolbar-image-opacity":o.value,height:void 0,...g.value},e.style]},a,{collapse:y.value,flat:v.value}),n)}),{}}});export{X as V};
