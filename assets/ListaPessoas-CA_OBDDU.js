import"./carousel.es-DP4-3C-u.js";import"./students-BmVlc4T7.js";import{_ as I}from"./user-1-BBy47uA3.js";import{c as z}from"./students-CS1yAh6K.js";import{s as N,I as l,Z as H,K as d,o as m,c as v,b as a,w as i,a as t,t as n,d as c,F as w,q as M,u as O,f as K,l as Z,j as G,H as J,a2 as Q,r as W}from"./index-CE1EgOkE.js";import{S as D}from"./sweetalert2.all-CZFGSkcc.js";import{V as T}from"./VCol-BVkXSYIl.js";import{V as X}from"./VTextField-Djy_Ks58.js";import{V as Y}from"./VDialog-CyKcs8St.js";import{a as j,d as tt,V as et}from"./VCard-C_d7acy6.js";import{V as u}from"./VBtn-zSkslYD0.js";import{V as at}from"./VSpacer-ALm75tUN.js";import{V as st}from"./VRow-CZhIEwEc.js";import{V as L}from"./VChip-DwrnDPxP.js";import{V as ot}from"./VTooltip-C3SrmZwt.js";import{V as it}from"./VTable-Bvq7pJIf.js";import{V as lt}from"./VDivider-BhlzuVGE.js";import{V as rt}from"./VPagination-BSWHxmeL.js";import{B as nt}from"./BaseBreadcrumb-8yYTXfM4.js";import"./useRender-DsgF-n7m.js";import"./router-CWBzUEIt.js";import"./VField-B0lBZkWQ.js";import"./index-D2o3fooy.js";import"./transition-x3c8NLaO.js";import"./VLabel-C0skgkuA.js";import"./VInput-CpXlmXss.js";import"./forwardRefs-D3j0TLhE.js";import"./VOverlay-wUUuaTU0.js";import"./lazy-CP20G78J.js";import"./dialog-transition-Bj3CIPrV.js";import"./VAvatar-Z8PX3BGa.js";import"./group-D7QI9lnA.js";import"./VProgressCircular-BU9XVsPm.js";import"./resizeObserver-BUGyTjcK.js";import"./VSlideGroup-ClyNkiGz.js";const dt={class:"text-h5"},ct={class:"pa-4 d-flex justify-end gap-2"},ut={class:"border-table"},mt=t("thead",null,[t("tr",null,[t("th",{class:"text-subtitle-1 font-weight-semibold"},"Nome"),t("th",{class:"text-subtitle-1 font-weight-semibold"},"Data Nascimento"),t("th",{class:"text-subtitle-1 font-weight-semibold"},"Batizado"),t("th",{class:"text-subtitle-1 font-weight-semibold"},"Participação"),t("th",{class:"text-subtitle-1 font-weight-semibold"},"Nome do Líder"),t("th",{class:"text-subtitle-1 font-weight-semibold"},"Ação")])],-1),pt={class:"d-flex align-center"},_t={class:""},ft={class:"text-subtitle-1 font-weight-semibold text-no-wrap"},gt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},vt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},xt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},bt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},ht={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},Vt={class:"d-flex align-center"},wt={class:"d-sm-flex justify-md-space-between align-center mt-3"},Ct={class:"text-subtitle-1 text-grey100"},yt=N({__name:"PessoasTabela",setup(k){const p=l(1),o=J(),C=Q();var x=!1;if(C.params.id_user!=="new"){const e=o.state.filial.user;console.log(e.user),e.user.ds_funcao=="ADMIN"&&(x=!0)}H(()=>{o.dispatch("pessoas/getListaPessoasInicio")});const y=d({get:()=>o.state.pessoas.lista_pessoas_inicio,set:e=>o.state.pessoas.lista_pessoas_inicio=e});d({get:()=>o.state.pessoas.total_paginas,set:e=>o.state.pessoas.total_paginas=e}),d({get:()=>o.state.pessoas.pagina_atual,set:e=>o.state.pessoas.pagina_atual=e});const A=d({get:()=>o.state.pessoas.ultima_pagina,set:e=>o.state.pessoas.ultima_pagina=e}),b=d({get:()=>o.state.pessoas.data_pagina,set:e=>o.state.pessoas.data_pagina=e});function F(e){console.log("Página atual:",e),o.commit("pessoas/setCurrentPage",e),o.dispatch("pessoas/getListaPessoasInicio")}console.log(y.value.nome_pessoa);function P(e){return e==null?"#FFAE1F":"#13DEB9"}l(!0);const _=l(!1),h=l("");l(["primary","secondary","error","success","warning"]);const V=l(z),f=l(-1),g=l({avatar:I,nome_pessoa:"",sexo:"",data_nascimento:"",estado_civil:"",conjuge:"",entrada_igreja:"",usermail:""}),E=l({avatar:I,nome_pessoa:"",sexo:"",data_nascimento:"",estado_civil:"",conjuge:"",entrada_igreja:"",usermail:""});l([]),l(["Solteiro","Casado"]),l("Solteiro"),l("Solteiro"),d(()=>V.value.filter(e=>e.nome_pessoa.toLowerCase().includes(h.value.toLowerCase())));function q(e){console.log(e),D.fire({title:"Inativar cadastro",text:"Deseja realmente invativar o cadastro?",icon:"warning",showDenyButton:!0,confirmButtonText:"Inativar",denyButtonText:"Cancelar"}).then(r=>{r.isConfirmed?o.dispatch("pessoas/inativarCadastro",e).then(B=>{D.fire("Inativado com sucesso!","","success"),o.dispatch("pessoas/getListaPessoasInicio")}):r.isDenied})}function S(){_.value=!1,setTimeout(()=>{g.value=Object.assign({},E.value),f.value=-1},300)}function R(){f.value>-1?Object.assign(V.value[f.value],g.value):V.value.push(g.value),S()}const U=d(()=>f.value===-1?"Novo Cadastro":"Editar Cadastro");return(e,r)=>{const B=W("TrashIcon");return m(),v(w,null,[a(st,null,{default:i(()=>[a(T,{cols:"12",lg:"4",md:"6"},{default:i(()=>[a(X,{density:"compact",modelValue:h.value,"onUpdate:modelValue":r[0]||(r[0]=s=>h.value=s),label:"Pesquisar Pessoa","hide-details":"",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(T,{cols:"12",lg:"8",md:"6",class:"text-right"},{default:i(()=>[a(Y,{modelValue:_.value,"onUpdate:modelValue":r[2]||(r[2]=s=>_.value=s),"max-width":"500"},{default:i(()=>[a(j,null,{default:i(()=>[a(tt,{class:"px-4 pt-6 justify-space-between d-flex align-center"},{default:i(()=>[t("span",dt,n(U.value),1),a(u,{onClick:r[1]||(r[1]=s=>_.value=!1),ripple:!1,density:"compact",icon:"mdi-close"})]),_:1}),t("div",ct,[a(at),a(u,{color:"error",class:"px-3 rounded-pill",onClick:S},{default:i(()=>[c("Cancel")]),_:1}),a(u,{color:"primary",disabled:g.value.nome_pessoa=="",class:"px-3 rounded-pill",onClick:R},{default:i(()=>[c("Save")]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t("div",ut,[a(it,{class:"mt-5"},{default:i(()=>[mt,t("tbody",null,[(m(!0),v(w,null,M(y.value,s=>(m(),v("tr",{key:s.nr_sequencial},[t("td",null,[t("div",pt,[t("div",_t,[t("h4",ft,n(s.nome_pessoa),1),t("div",gt,"Sexo: "+n(s.sexo_pessoa),1)])])]),t("td",vt,n(new Date(s.dt_nascimento).toLocaleDateString("pt-BR")),1),t("td",xt,[a(L,{color:P(s.dt_batismo)},{default:i(()=>[c(n(s.dt_batismo?new Date(s.dt_batismo).toLocaleDateString("pt-BR"):"N/A"),1)]),_:2},1032,["color"])]),t("td",bt,[a(L,{color:P(s.tp_participacao)},{default:i(()=>[c(n(s.tp_participacao?s.tp_participacao:"N/A"),1)]),_:2},1032,["color"])]),t("td",ht,n(s.nome_lider?s.nome_lider:"N/A"),1),t("td",null,[t("div",Vt,[O(x)?(m(),K(ot,{key:0,text:"Inativar"},{activator:i(({props:$})=>[a(u,Z({icon:"",flat:"",onClick:Pt=>q(s)},$),{default:i(()=>[a(B,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024)):G("",!0),a(u,{flat:"",class:"bg-lightprimary text-primary",to:"/pessoas/pessoa-perfil/"+s.nr_sequencial},{default:i(()=>[c(" Perfil ")]),_:2},1032,["to"])])])]))),128))])]),_:1})]),a(lt),t("div",wt,[t("div",Ct,"Exibindo "+n(b.value.from)+" até "+n(b.value.to)+" de "+n(b.value.total)+" registros",1),t("div",null,[a(rt,{modelValue:p.value,"onUpdate:modelValue":[r[3]||(r[3]=s=>p.value=s),F],"total-rows":10,rounded:"circle",density:"compact",class:"text-subtitle-1 text-grey100 my-4",length:A.value,"total-visible":7},null,8,["modelValue","length"])])])],64)}}}),re=N({__name:"ListaPessoas",setup(k){const p=l({title:"Lista de Pessoas"}),o=l([{text:"Home",disabled:!1,href:"#"},{text:"Lista de Pessoas",disabled:!0,href:"#"}]);return(C,x)=>(m(),v(w,null,[a(nt,{title:p.value.title,breadcrumbs:o.value},null,8,["title","breadcrumbs"]),a(j,{elevation:"10"},{default:i(()=>[a(et,null,{default:i(()=>[a(yt)]),_:1})]),_:1})],64))}});export{re as default};
