import{s as Y,P as d,B as m,O as ie,o as g,f as U,w as a,b as e,a as v,d as r,u as p,j as k,c as N,dl as ne,dm as q,D as de,H as me,I as ce,F as pe}from"./index-BovjKzzn.js";import{S as K}from"./sweetalert2.all-D5AJp6lF.js";import{V as fe,c as ve}from"./VCard-CbuQr9jo.js";import{a as L,V as u}from"./VRow-Dyti4OOL.js";import{V as i}from"./VLabel-DKqZSnz8.js";import{V as M}from"./VAutocomplete-CmxfIwMz.js";import{V as W}from"./VProgressCircular-pWU22Icx.js";import{V as _e}from"./VSelect-X1BOKjQC.js";import{V as f}from"./VTextField-BsfBJLlw.js";import{V as X}from"./VDivider-C6D_eFJu.js";import{V as R}from"./VBtn-BlrtyJ9r.js";import{e as ge}from"./router-Bz87p99J.js";import{B as Ve}from"./BaseBreadcrumb-DsFGPe2-.js";import"./useRender-DFrYBxSb.js";import"./VAvatar-CtI9eIEG.js";import"./transition-Dw63KNs-.js";import"./filter-CoRktrqY.js";import"./VInput-Bv2gmjVW.js";import"./index-8-fmSD3m.js";import"./forwardRefs-D3j0TLhE.js";import"./VList-DZrOSbwA.js";import"./ssrBoot-Ckr4_PPe.js";import"./VMenu-DZSSRrlI.js";import"./VOverlay-Coifhb9-.js";import"./lazy-KSEeCE79.js";import"./dialog-transition-DjEMSru9.js";import"./VCheckboxBtn-5xdDnflP.js";import"./VSelectionControl-CboiIvYh.js";import"./VChip-x1kOIklR.js";import"./VSlideGroup-D6JOypyl.js";import"./group-K0_yIKms.js";import"./resizeObserver-Bl3sd0bz.js";import"./VField-DrkGlfff.js";const he=v("h4",{class:"text-h4"},"Lançamento de Culto",-1),ye=v("div",{class:"text-subtitle-1 text-grey100 mt-2"},"Preencha as informações do culto abaixo!",-1),be={class:"mt-6"},xe={class:"d-flex"},we={key:0,class:"ml-5"},Ce={class:"d-flex"},qe={key:0,class:"ml-5"},Ie={class:"d-flex justify-end mt-5 pb-3"},Fe=Y({__name:"RegistroCultos",setup(Z){const s=de(),I=me();ce();const F=d({get:()=>s.state.cultos.culto.quem_pregou,set:o=>s.state.cultos.culto.quem_pregou=o}),B=d({get:()=>s.state.cultos.culto.diacono_01,set:o=>s.state.cultos.culto.diacono_01=o}),V=d({get:()=>s.state.cultos.culto.dizimos,set:o=>s.state.cultos.culto.dizimos=o}),h=d({get:()=>s.state.cultos.culto.ofertas_gerais,set:o=>s.state.cultos.culto.ofertas_gerais=o}),y=d({get:()=>s.state.cultos.culto.doacoes_especiais,set:o=>s.state.cultos.culto.doacoes_especiais=o}),b=d({get:()=>s.state.cultos.culto.outras_entradas,set:o=>s.state.cultos.culto.outras_entradas=o}),x=d({get:()=>s.state.cultos.culto.ofertas_celulas,set:o=>s.state.cultos.culto.ofertas_celulas=o}),T=d({get:()=>s.state.cultos.culto.dia_semana,set:o=>s.state.cultos.culto.dia_semana=o}),j=d({get:()=>s.state.cultos.culto.horario,set:o=>s.state.cultos.culto.horario=o}),P=d({get:()=>s.state.cultos.culto.criancas_apresentadas,set:o=>s.state.cultos.culto.criancas_apresentadas=o}),$=d({get:()=>s.state.cultos.culto.novos_convidados,set:o=>s.state.cultos.culto.novos_convidados=o}),D=d({get:()=>s.state.cultos.culto.valor_total,set:o=>s.state.cultos.culto.valor_total=o}),ee=m(["Segunda","Terca","Quarta","Quinta","Sexta","Sabado","Domingo"]);var n=m([]);const c=m(!1),E=m("");var n=m([]);const O=o=>{const t=o.target;E.value=t.value,n.value=[],c.value=!0,s.dispatch("pessoas/getListaPessoa",E.value).then(l=>{const C=l.data.listaPessoas.map(_=>({nr_sequencial:_.nr_sequencial,nome_pessoa:_.nome_pessoa}));console.log(n),n.value=C,c.value=!1}).catch(()=>{c.value=!1}),c.value=!1},z=m(I.params.id_grupo);ie(()=>I.params.id_grupo,o=>{z.value=o,z.value==="new"?te():ae(z.value)},{immediate:!0});function te(){console.log("Limpar formulários"),s.dispatch("pessoas/limparFormularios")}const S=m(null);var n=m([]);function ae(o){s.dispatch("grupos/getGrupoId",o).then(t=>{console.log(t.data);const l={nr_sequencial:t.data.grupo.nr_seq_lider.nr_sequencial,nome_pessoa:t.data.grupo.nr_seq_lider.nome_pessoa},C={nr_sequencial:t.data.grupo.nr_seq_vice_lider.nr_sequencial,nome_pessoa:t.data.grupo.nr_seq_vice_lider.nome_pessoa},_={nr_sequencial:t.data.grupo.nr_seq_anfitriao.nr_sequencial,nome_pessoa:t.data.grupo.nr_seq_anfitriao.nome_pessoa};n.value.push(l),n.value.push(C),n.value.push(_),F.value=t.data.grupo.nr_seq_lider.nr_sequencial})}m("");function w(o){let t=o.replace(/\D/g,"");t=(parseFloat(t)/100).toFixed(2).toString();const l=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat(t));return setTimeout(()=>{oe()},0),l}function oe(){var G,H,Q,A,J;const o=parseFloat(((G=V.value)==null?void 0:G.replace(/\D/g,""))||0)/100,t=parseFloat(((H=h.value)==null?void 0:H.replace(/\D/g,""))||0)/100,l=parseFloat(((Q=y.value)==null?void 0:Q.replace(/\D/g,""))||0)/100,C=parseFloat(((A=b.value)==null?void 0:A.replace(/\D/g,""))||0)/100,_=parseFloat(((J=x.value)==null?void 0:J.replace(/\D/g,""))||0)/100,ue=o+t+l+C+_;D.value=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(ue)}function le(){S.value&&S.value.click()}function se(o){const t=o.target;if(t&&t.files){const l=t.files;s.commit("cultos/setUploadFile",l)}else console.error("Nenhum arquivo inserido")}function re(){s.dispatch("cultos/registrarCulto").then(o=>{o.data&&K.fire({title:"Sucesso!",text:"Culto cadastrado com sucesso",icon:"success",timer:2e3,showConfirmButton:!1})}).catch(o=>{K.fire({title:"Error!",text:"Erro ao registrar culto!",icon:"error",timer:2e3,showConfirmButton:!1})})}return(o,t)=>(g(),U(L,{class:""},{default:a(()=>[e(u,{cols:"12",md:"12"},{default:a(()=>[e(fe,{elevation:"10"},{default:a(()=>[e(ve,null,{default:a(()=>[he,ye,v("div",be,[e(L,null,{default:a(()=>[e(u,{cols:"12",md:"12"},{default:a(()=>[e(i,{class:"mb-2 font-weight-medium",for:"dob"},{default:a(()=>[r("Quem pregou:")]),_:1}),v("div",xe,[e(M,{modelValue:F.value,"onUpdate:modelValue":t[0]||(t[0]=l=>F.value=l),label:"Buscar nome de quem pregou",items:p(n),color:"primary",variant:"outlined","hide-details":"",onInput:O,"item-title":"nome_pessoa","item-value":"nr_sequencial",loading:c.value},{"append-item":a(()=>[c.value?(g(),U(W,{key:0,class:"ml-5",indeterminate:"",color:"primary"})):k("",!0)]),"no-data":a(()=>[!c.value&&p(n).length===0?(g(),N("div",we,"Nenhum dado encontrado")):k("",!0)]),_:1},8,["modelValue","items","loading"])])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(i,{class:"mb-0 font-weight-medium"},{default:a(()=>[r("Dia da Semana:")]),_:1}),e(_e,{modelValue:T.value,"onUpdate:modelValue":t[1]||(t[1]=l=>T.value=l),items:ee.value,label:"Selecione o dia que foi realizado",multiple:"","persistent-hint":""},null,8,["modelValue","items"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(i,{class:"mb-0 font-weight-medium"},{default:a(()=>[r("Horário:")]),_:1}),e(f,{modelValue:j.value,"onUpdate:modelValue":t[2]||(t[2]=l=>j.value=l),variant:"outlined",placeholder:"hh:mm",id:"fctime",type:"time",color:"primary"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(i,{class:"mb-2 font-weight-medium"},{default:a(()=>[r("Total de novos convidados:")]),_:1}),e(f,{color:"primary",variant:"outlined",type:"number","hide-details":"",modelValue:$.value,"onUpdate:modelValue":t[3]||(t[3]=l=>$.value=l)},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(i,{class:"mb-2 font-weight-medium"},{default:a(()=>[r("Total de crianças apresentadas:")]),_:1}),e(f,{color:"primary",variant:"outlined",type:"number","hide-details":"",modelValue:P.value,"onUpdate:modelValue":t[4]||(t[4]=l=>P.value=l)},null,8,["modelValue"])]),_:1}),e(X),e(u,{cols:"12",md:"6"},{default:a(()=>[e(i,{class:"mb-2 font-weight-medium"},{default:a(()=>[r("Dízimos:")]),_:1}),e(f,{color:"primary",variant:"outlined",type:"text","hide-details":"",modelValue:V.value,"onUpdate:modelValue":t[5]||(t[5]=l=>V.value=l),onInput:t[6]||(t[6]=l=>V.value=w(V.value))},{"prepend-inner":a(()=>[e(p(ne),{"troke-width":"1.5",size:"22",class:"text-medium-emphasis"})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(i,{class:"mb-2 font-weight-medium"},{default:a(()=>[r("Ofertas Gerais:")]),_:1}),e(f,{color:"primary",variant:"outlined",type:"text","hide-details":"",modelValue:h.value,"onUpdate:modelValue":t[7]||(t[7]=l=>h.value=l),onInput:t[8]||(t[8]=l=>h.value=w(h.value))},{"prepend-inner":a(()=>[e(p(q),{"troke-width":"1.5",size:"22",class:"text-medium-emphasis"})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(i,{class:"mb-2 font-weight-medium"},{default:a(()=>[r("Doações Especiais:")]),_:1}),e(f,{color:"primary",variant:"outlined",type:"text","hide-details":"",modelValue:y.value,"onUpdate:modelValue":t[9]||(t[9]=l=>y.value=l),onInput:t[10]||(t[10]=l=>y.value=w(y.value))},{"prepend-inner":a(()=>[e(p(q),{"troke-width":"1.5",size:"22",class:"text-medium-emphasis"})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(i,{class:"mb-2 font-weight-medium"},{default:a(()=>[r("Outras Entradas:")]),_:1}),e(f,{color:"primary",variant:"outlined",type:"text","hide-details":"",modelValue:b.value,"onUpdate:modelValue":t[11]||(t[11]=l=>b.value=l),onInput:t[12]||(t[12]=l=>b.value=w(b.value))},{"prepend-inner":a(()=>[e(p(q),{"troke-width":"1.5",size:"22",class:"text-medium-emphasis"})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(i,{class:"mb-2 font-weight-medium"},{default:a(()=>[r("Ofertas Células:")]),_:1}),e(f,{color:"primary",variant:"outlined",type:"text","hide-details":"",modelValue:x.value,"onUpdate:modelValue":t[13]||(t[13]=l=>x.value=l),onInput:t[14]||(t[14]=l=>x.value=w(x.value))},{"prepend-inner":a(()=>[e(p(q),{"troke-width":"1.5",size:"22",class:"text-medium-emphasis"})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(i,{class:"mb-2 font-weight-medium"},{default:a(()=>[r("Total:")]),_:1}),e(f,{color:"primary",variant:"outlined",type:"text",disabled:"","hide-details":"",modelValue:D.value,"onUpdate:modelValue":t[15]||(t[15]=l=>D.value=l)},{"prepend-inner":a(()=>[e(p(q),{"troke-width":"1.5",size:"22",class:"text-medium-emphasis"})]),_:1},8,["modelValue"])]),_:1}),e(X),e(u,{cols:"12",md:"12"},{default:a(()=>[e(i,{class:"mb-2 font-weight-medium",for:"dob"},{default:a(()=>[r("Primeiro Diácono:")]),_:1}),v("div",Ce,[e(M,{modelValue:B.value,"onUpdate:modelValue":t[16]||(t[16]=l=>B.value=l),label:"Buscar Nome do diacono",items:p(n),color:"primary",variant:"outlined","hide-details":"",onInput:O,"item-title":"nome_pessoa","item-value":"nr_sequencial",loading:c.value},{"append-item":a(()=>[c.value?(g(),U(W,{key:0,class:"ml-5",indeterminate:"",color:"primary"})):k("",!0)]),"no-data":a(()=>[!c.value&&p(n).length===0?(g(),N("div",qe,"Nenhum dado encontrado")):k("",!0)]),_:1},8,["modelValue","items","loading"])])]),_:1}),e(u,{col:"12",md:"12"},{default:a(()=>[e(i,{class:"mb-2 font-weight-medium",for:"camera-input"},{default:a(()=>[r("Capture uma foto:")]),_:1}),e(R,{onClick:le,color:"primary",icon:""},{default:a(()=>[e(ge,{left:""},{default:a(()=>[r("mdi-camera")]),_:1}),r(" Tirar Foto ")]),_:1}),v("input",{ref_key:"cameraInput",ref:S,type:"file",accept:"image/*",capture:"",style:{display:"none"},onChange:se},null,544)]),_:1})]),_:1}),v("div",Ie,[e(R,{size:"large",color:"primary",rounded:"pill",class:"mr-4",onClick:re},{default:a(()=>[r("Salvar")]),_:1}),e(R,{size:"large",class:"bg-lighterror text-error",rounded:"pill"},{default:a(()=>[r("Cancelar")]),_:1})])])]),_:1})]),_:1})]),_:1})]),_:1}))}}),ut=Y({__name:"RegistroCultos",setup(Z){m(null);const s=m({title:"Registro de Cultos"}),I=m([{text:"Início",disabled:!1,href:"#"},{text:"Registro de Cultos",disabled:!0,href:"#"}]);return(F,B)=>(g(),N(pe,null,[e(Ve,{title:s.value.title,breadcrumbs:I.value},null,8,["title","breadcrumbs"]),e(L,{class:"justify-center"},{default:a(()=>[e(u,{cols:"12",md:"12"},{default:a(()=>[e(Fe)]),_:1})]),_:1})],64))}});export{ut as default};
