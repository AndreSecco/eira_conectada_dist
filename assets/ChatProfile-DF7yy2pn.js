import{a2 as $,a3 as H,a4 as N,Y as T,B as C,z as y,o as l,c,b as s,w as e,a as o,l as z,d as p,F as g,q as w,f as u,t as d,u as m,a1 as F,r as V}from"./index-2iBXg6tA.js";import{V as E}from"./VTextField-BvHsYYsO.js";import{V as U}from"./VMenu-DQktHpbE.js";import{V as q}from"./VBtn--EmSZXzJ.js";import{e as b,a as S,c as k}from"./VList-DgHlZtAZ.js";import{V as v}from"./VSheet-CxH7TfXG.js";import{V as B}from"./VAvatar-b5RH4r5y.js";import{V as L}from"./VBadge-BhWzgof9.js";import{f as R}from"./index-Bb0I5oHI.js";import{_ as Y}from"./user-1-BBy47uA3.js";const j=$({id:"chat",state:()=>({chats:[],chatContent:1}),getters:{},actions:{async fetchChats(){try{const a=await H.get("/api/data/chat/ChatData");this.chats=a.data}catch(a){alert(a),console.log(a)}},SelectChat(a){this.chatContent=a},sendMsg(a,r){const h={id:a,msg:r,type:"text",attachments:[],createdAt:N(new Date,{seconds:1}),senderId:a};this.chats=this.chats.filter(n=>n.id===a?{...n,...n.chatHistory.push(h)}:n)}}}),G={class:"px-6 pt-3"},J=["src"],K=o("small",{class:"textPrimary text-subtitle-2"},"Sent a Photo",-1),O={key:1,class:"text-subtitle-2 textPrimary mt-1 text-truncate w-100"},Q={class:"d-flex flex-column text-right w-25"},W={class:"textPrimary text-subtitle-2"},X={__name:"ChatListing",setup(a){const r=j();T(()=>{r.fetchChats()});const n=C(()=>r.chats),_=y(""),P=C(()=>n.value.filter(i=>i.name.toLowerCase().includes(_.value.toLowerCase()))),D=i=>F.last(i.chatHistory).createdAt,M=y([{title:"Sort by time"},{title:"Sort by Unread"},{title:"Mark all as read"}]);return(i,x)=>{const A=V("ChevronDownIcon"),I=V("perfect-scrollbar");return l(),c(g,null,[s(v,null,{default:e(()=>[o("div",G,[s(E,{variant:"outlined",modelValue:_.value,"onUpdate:modelValue":x[0]||(x[0]=t=>_.value=t),"append-inner-icon":"mdi-magnify",placeholder:"Search Contact","hide-details":"",density:"compact"},null,8,["modelValue"]),s(U,null,{activator:e(({props:t})=>[s(q,z({color:"white",variant:"flat",class:"mt-4 text-medium-emphasis"},t),{default:e(()=>[p("Recent Chats "),s(A,{size:"18",class:"ml-2"})]),_:2},1040)]),default:e(()=>[s(b,{class:"elevation-10"},{default:e(()=>[(l(!0),c(g,null,w(M.value,(t,f)=>(l(),u(k,{key:f,value:f},{default:e(()=>[s(S,null,{default:e(()=>[p(d(t.title),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1}),s(I,{class:"lgScroll h-100"},{default:e(()=>[s(b,null,{default:e(()=>[(l(!0),c(g,null,w(P.value,t=>(l(),u(k,{value:t.id,color:"secondary",class:"text-no-wrap chatItem",key:t.id,lines:"two",active:m(r).chatContent===t.id,onClick:f=>m(r).SelectChat(t.id)},{prepend:e(()=>[s(B,null,{default:e(()=>[o("img",{src:t.thumb,alt:"pro",width:"50"},null,8,J)]),_:2},1024),s(L,{class:"badg-dot",dot:"",color:t.status==="away"?"warning":t.status==="busy"?"error":t.status==="online"?"success":"containerBg"},null,8,["color"])]),append:e(()=>[o("div",Q,[o("small",W,d(m(R)(new Date(D(t)),{addSuffix:!1})),1)])]),default:e(()=>[s(S,{class:"text-subtitle-1 textPrimary w-100 font-weight-semibold"},{default:e(()=>[p(d(t.name),1)]),_:2},1024),t.chatHistory.slice(-1)[0].type=="img"?(l(),u(v,{key:0},{default:e(()=>[K]),_:1})):(l(),c("div",O,d(t.chatHistory.slice(-1)[0].msg),1))]),_:2},1032,["value","active","onClick"]))),128))]),_:1})]),_:1})],64)}}},ht=X,Z={class:"d-flex gap-2 align-center pa-6"},tt=["src"],et=o("div",null,[o("h5",{class:"text-subtitle-1 font-weight-semibold"},"Mathew Anderson"),o("h6",{class:"text-subtitle-2"},"Designer")],-1),st={__name:"ChatProfile",setup(a){return(r,h)=>(l(),u(v,null,{default:e(()=>[o("div",Z,[s(B,{size:"large"},{default:e(()=>[o("img",{src:m(Y),alt:"pro",width:"54"},null,8,tt)]),_:1}),s(L,{class:"badg-dotDetail",dot:"",color:"success"}),et])]),_:1}))}},_t=st;export{_t as C,ht as a,j as u};
