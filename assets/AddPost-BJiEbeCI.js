import{u as D,a as E}from"./uniqueId-Blbx3YnD.js";import{V as z}from"./VAvatar-Z8PX3BGa.js";import{V as F}from"./VTooltip-C3SrmZwt.js";import{V as v}from"./VBtn-zSkslYD0.js";import{a as O,b as st}from"./VCard-C_d7acy6.js";import{V as ot}from"./VTextField-Djy_Ks58.js";import{s as q,I as A,o,c as r,b as t,w as a,a as s,t as d,d as _,l as N,F as T,q as U,j as L,r as $,f as C,u as tt,ay as et,az as at,aA as ct,aB as rt,aC as dt,Z as mt,K as ut}from"./index-CE1EgOkE.js";import{_ as lt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as nt}from"./VRow-CZhIEwEc.js";import{V as it}from"./VCol-BVkXSYIl.js";import{V as ft}from"./VMenu-IA1kaNy2.js";import{e as pt,c as vt,a as ht}from"./VList-DM2dJrbC.js";import{V as _t}from"./VDivider-BhlzuVGE.js";import{V as yt}from"./VTextarea-CbBerSOL.js";const gt={class:"d-flex gap-3 align-center"},bt=["src"],xt={class:"d-block d-sm-flex align-center gap-3"},kt={class:"text-h6"},Vt={class:"text-subtitle-2 opacity-50"},It={class:"py-3 text-body-1"},Ct={class:"my-1 d-flex align-center gap-3"},wt={class:"text-subtitle-1 font-weight-semibold"},zt={key:0,class:"ml-10"},$t={class:"d-flex gap-3 align-center"},Pt=["src"],Lt={class:"d-block d-sm-flex align-center gap-3"},Tt={class:"text-h6"},Bt={class:"text-subtitle-2 opacity-50"},Rt={class:"py-3 text-body-1"},St={key:1,class:"d-block d-sm-flex gap-3 align-center mb-5 ml-10"},At=["src"],Nt=q({__name:"Comments",props:{comments:Object||Array,postId:String},setup(e){const y=D(),m=e,u=A(""),g=async(M,x,w)=>{var n,V;const k={id:E("#REPLY_"),profile:{id:E("#REPLY_"),avatar:(n=m.comments)==null?void 0:n.profile.avatar,name:(V=m.comments)==null?void 0:V.profile.name,time:"now"},data:{comment:w,likes:{like:!1,value:0},replies:[]}};y.addReply(M,x,k),u.value=""},b=A(!1),j=()=>b.value=!b.value;return(M,x)=>{var n,V,P;const w=$("CircleIcon"),B=$("ThumbUpIcon"),k=$("ArrowBackUpIcon");return o(),r(T,null,[t(O,{variant:"flat",class:"mb-3 pa-5 border bg-surface"},{default:a(()=>{var l,f,c,p,R,S;return[s("div",gt,[t(z,{size:"30"},{default:a(()=>{var h;return[s("img",{src:(h=e.comments)==null?void 0:h.profile.avatar,width:"30",alt:"avatar"},null,8,bt)]}),_:1}),s("div",xt,[s("h6",kt,d((l=e.comments)==null?void 0:l.profile.name),1),s("span",Vt,[t(w,{size:"8",fill:"inherit",class:"opacity-50 mr-1"}),_(" "+d((f=e.comments)==null?void 0:f.profile.time),1)])])]),s("div",It,d((c=e.comments)==null?void 0:c.data.comment),1),s("div",Ct,[t(F,{text:"Like"},{activator:a(({props:h})=>[t(v,N({icon:"",color:"primary",variant:"flat",size:"x-small"},h),{default:a(()=>[t(B,{size:"16"})]),_:2},1040)]),_:1}),s("span",wt,d(((p=e.comments)==null?void 0:p.data)&&((R=e.comments)==null?void 0:R.data.likes)&&((S=e.comments)==null?void 0:S.data.likes.value)),1),t(F,{text:"Reply"},{activator:a(({props:h})=>[t(v,N({icon:"",color:"secondary",variant:"flat"},h,{size:"x-small",onClick:j}),{default:a(()=>[t(k,{size:"16"})]),_:2},1040)]),_:1})])]}),_:1}),(n=e.comments)!=null&&n.data.replies?(o(),r("div",zt,[(o(!0),r(T,null,U((V=e.comments)==null?void 0:V.data.replies,l=>(o(),r("div",null,[t(O,{variant:"flat",class:"mb-3 pa-5 border"},{default:a(()=>[s("div",$t,[t(z,{size:"30"},{default:a(()=>[s("img",{src:l.profile.avatar,width:"30",alt:"avatar"},null,8,Pt)]),_:2},1024),s("div",Lt,[s("h6",Tt,d(l.profile.name),1),s("span",Bt,[t(w,{size:"8",fill:"inherit",class:"opacity-50 mr-1"}),_(" "+d(l.profile.time),1)])])]),s("div",Rt,d(l.data.comment),1)]),_:2},1024)]))),256))])):L("",!0),b.value?(o(),r("div",St,[s("img",{src:(P=e.comments)==null?void 0:P.profile.avatar,width:"40",class:"flex-shrink-0 d-none d-sm-block",alt:"avatar"},null,8,At),t(ot,{variant:"outlined",color:"primary",modelValue:u.value,"onUpdate:modelValue":x[0]||(x[0]=l=>u.value=l),label:"Write Reply","hide-details":""},null,8,["modelValue"]),t(v,{color:"secondary",class:"mt-3 mt-sm-0",variant:"flat",size:"large",onClick:x[1]||(x[1]=l=>{var f;return g(e.postId,(f=e.comments)==null?void 0:f.id,u.value)})},{default:a(()=>[_(" Reply ")]),_:1})])):L("",!0)],64)}}}),Ut=lt(Nt,[["__scopeId","data-v-b702452b"]]),Mt={class:"d-flex gap-3 align-center"},Et=["src"],Ft={class:"d-block d-sm-flex align-center gap-3"},Ot={class:"text-h6"},jt={class:"text-subtitle-2 opacity-50"},Dt={class:"py-4 text-body-1"},qt=["src"],Yt={key:1,class:"rounded-md overflow-hidden my-5"},Kt=["src"],Wt={class:"my-4 mt-5 d-flex align-center gap-3"},Zt={class:"text-subtitle-1 font-weight-semibold"},Gt={class:"text-subtitle-1 font-weight-semibold"},Ht={key:0,class:"pa-5 pt-0"},Jt={key:1},Qt={class:"d-block d-sm-flex gap-3 align-center mb-4 px-4 pt-4"},Xt=["src"],te=q({__name:"PostItem",props:{post:Object||Array},setup(e){var w,B;const y=D(),m=e,u=A(!((w=m.post)!=null&&w.comments&&((B=m.post)==null?void 0:B.comments.length)>0)),g=A(""),b=A([{title:"Share Now",icon:at},{title:"Share to Friends",icon:rt},{title:"Send in Messanger",icon:et},{title:"Copy Link",icon:dt}]),j=()=>u.value=!u.value,M=async k=>{await y.likePost(k)},x=async(k,n)=>{var l,f;const P={id:E("#COMMENT_"),profile:{id:E("#COMMENT_"),avatar:(l=m.post)==null?void 0:l.profile.avatar,name:(f=m.post)==null?void 0:f.profile.name,time:"now"},data:{comment:n,likes:{like:!1,value:0},replies:[]}};y.addComment(k,P),g.value=""};return(k,n)=>{const V=$("CircleIcon"),P=$("ThumbUpIcon");return o(),C(O,{elevation:"10",class:"bg-surface"},{default:a(()=>{var l,f;return[t(st,null,{default:a(()=>{var c,p,R,S,h,Y,K,W,Z,G,H;return[s("div",Mt,[t(z,{size:"40"},{default:a(()=>{var i;return[s("img",{src:(i=e.post)==null?void 0:i.profile.avatar,width:"40",alt:"avatar"},null,8,Et)]}),_:1}),s("div",Ft,[s("h6",Ot,d((c=e.post)==null?void 0:c.profile.name),1),s("span",jt,[t(V,{size:"8",fill:"inherit",class:"opacity-50 mr-1"}),_(" "+d((p=e.post)==null?void 0:p.profile.time),1)])])]),s("div",Dt,d((R=e.post)==null?void 0:R.data.content),1),(S=e.post)!=null&&S.data.images?(o(),C(nt,{key:0},{default:a(()=>{var i;return[(o(!0),r(T,null,U((i=e.post)==null?void 0:i.data.images,I=>(o(),C(it,{md:I.featured?"12":"6"},{default:a(()=>[t(z,{class:"rounded-md w-100",size:"360"},{default:a(()=>[s("img",{src:I.img,alt:"photo"},null,8,qt)]),_:2},1024)]),_:2},1032,["md"]))),256))]}),_:1})):L("",!0),(h=e.post)!=null&&h.data.video?(o(),r("div",Yt,[s("iframe",{src:`https://www.youtube.com/embed/${(Y=e.post)==null?void 0:Y.data.video}`,frameborder:"0",width:"100%",height:"400"},null,8,Kt)])):L("",!0),s("div",Wt,[t(F,{text:"Like"},{activator:a(({props:i})=>{var I,J,Q;return[t(v,N({onClick:n[0]||(n[0]=oe=>{var X;return M(`${(X=e.post)==null?void 0:X.id}`)})},i,{icon:"",color:(I=e.post)!=null&&I.data&&((J=e.post)!=null&&J.data.likes)&&((Q=e.post)!=null&&Q.data.likes.like)?"primary":"grey100",variant:"flat",size:"x-small"}),{default:a(()=>[t(P,{size:"16"})]),_:2},1040,["color"])]}),_:1}),s("span",Zt,d(((K=e.post)==null?void 0:K.data)&&((W=e.post)==null?void 0:W.data.likes)&&((Z=e.post)==null?void 0:Z.data.likes.value)),1),t(F,{text:"Comment"},{activator:a(({props:i})=>[t(v,N({icon:""},i,{color:"secondary",variant:"flat",size:"x-small",onClick:j}),{default:a(()=>[t(tt(et),{size:"16"})]),_:2},1040)]),_:1}),s("span",Gt,d((G=e.post)!=null&&G.data.comments?(H=e.post)==null?void 0:H.data.comments.length:0),1),t(ft,null,{activator:a(({props:i})=>[t(v,N({icon:"",class:"ml-auto",variant:"text",size:"small"},i),{default:a(()=>[t(tt(at),{size:"16"})]),_:2},1040)]),default:a(()=>[t(pt,null,{default:a(()=>[(o(!0),r(T,null,U(b.value,(i,I)=>(o(),C(vt,{key:I,value:I},{prepend:a(()=>[(o(),C(ct(i.icon),{"stroke-width":"1.5",size:"20"}))]),default:a(()=>[t(ht,{class:"ml-3"},{default:a(()=>[_(d(i.title),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]}),_:1}),(l=e.post)!=null&&l.data.comments?(o(),r("div",Ht,[(o(!0),r(T,null,U((f=e.post)==null?void 0:f.data.comments,c=>{var p;return o(),r("div",null,[t(Ut,{comments:c,postId:(p=e.post)==null?void 0:p.id},null,8,["comments","postId"])])}),256))])):L("",!0),u.value?(o(),r("div",Jt,[t(_t),s("div",Qt,[t(z,{class:"flex-shrink-0 d-none d-sm-block",size:"33"},{default:a(()=>{var c;return[s("img",{src:(c=e.post)==null?void 0:c.profile.avatar,width:"33",alt:"avatar"},null,8,Xt)]}),_:1}),t(ot,{variant:"outlined",color:"primary",modelValue:g.value,"onUpdate:modelValue":n[1]||(n[1]=c=>g.value=c),placeholder:"Comment","hide-details":""},null,8,["modelValue"]),t(v,{color:"primary",disabled:g.value==="",class:"mt-3 mt-sm-0",size:"large",onClick:n[2]||(n[2]=c=>{var p;return x((p=e.post)==null?void 0:p.id,g.value)})},{default:a(()=>[_(" Comment ")]),_:1},8,["disabled"])])])):L("",!0)]}),_:1})}}}),ge=q({__name:"PostListing",setup(e){const y=D();mt(()=>{y.fetchPosts()});const m=ut(()=>y.posts);return(u,g)=>(o(),C(nt,{class:"mt-4"},{default:a(()=>[(o(!0),r(T,null,U(m.value,b=>(o(),C(it,{cols:"12",key:b.id},{default:a(()=>[t(te,{post:b},null,8,["post"])]),_:2},1024))),128))]),_:1}))}}),ee={},ae={class:"d-flex pb-2"};function se(e,y){const m=$("PhotoIcon"),u=$("NotebookIcon");return o(),C(O,{elevation:"10",class:"bg-surface"},{default:a(()=>[t(st,null,{default:a(()=>[t(yt,{elevation:"10",color:"primary",name:"input-7-4",placeholder:"Share your thoughts",rows:"5"}),s("div",ae,[t(z,{size:"32",color:"primary",class:"mr-2"},{default:a(()=>[t(m,{size:"16"})]),_:1}),t(v,{color:"inherit",type:"upload",variant:"plain",class:"opacity-1"},{default:a(()=>[_(" Photo / Video ")]),_:1}),t(v,{color:"inherit",variant:"plain",class:"opacity-1"},{default:a(()=>[t(z,{size:"32",color:"secondary",class:"mr-2"},{default:a(()=>[t(u,{size:"16"})]),_:1}),_(" Article ")]),_:1}),t(v,{class:"bg-primary ml-auto",size:"large"},{default:a(()=>[_("Post")]),_:1})])]),_:1})]),_:1})}const be=lt(ee,[["render",se]]);export{be as A,ge as _};
