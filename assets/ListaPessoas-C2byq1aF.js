import"./carousel.es-mToVRCZK.js";import{c as O}from"./students-DRUKGyAV.js";import{_ as D}from"./user-1-BBy47uA3.js";import{s as E,I as l,Z as K,K as d,o as u,c as v,b as e,w as i,a as t,t as r,d as g,F as C,q as Z,u as T,f as G,l as k,j as J,dc as Q,H as W,a2 as X,r as Y}from"./index-cm5CQck1.js";import{S as L}from"./sweetalert2.all-111E6LPE.js";import{V as N}from"./VCol-BbWEsurH.js";import{V as tt}from"./VTextField-CL_FkUCP.js";import{V as et}from"./VDialog-C0BQbp54.js";import{a as F,d as at,V as st}from"./VCard-DHNReyGA.js";import{V as c}from"./VBtn-WOeWvKW5.js";import{V as ot}from"./VSpacer-lU84vlvA.js";import{V as it}from"./VRow-BQzs-YKQ.js";import{V as j}from"./VChip-D_uIp1hb.js";import{V as A}from"./VTooltip-FtXV7k8n.js";import{V as lt}from"./VTable-CG7aS8IK.js";import{V as nt}from"./VDivider-0PTK1eHP.js";import{V as rt}from"./VPagination-DmMrBlGZ.js";import{B as dt}from"./BaseBreadcrumb-COkdCpgb.js";import"./useRender-UnG0_1H0.js";import"./router-6K5-h50T.js";import"./VField-CAf7BG89.js";import"./index-DeI07xgU.js";import"./transition-BWOhazb5.js";import"./VLabel-D0rAOqfU.js";import"./VInput-EpfY68yB.js";import"./forwardRefs-D3j0TLhE.js";import"./VOverlay-Clx66eJ9.js";import"./lazy-COq7LlfX.js";import"./dialog-transition-DoN5axZC.js";import"./VAvatar-qtwk4po4.js";import"./group-DrvicJJV.js";import"./VProgressCircular-RekGhBsL.js";import"./resizeObserver-DCD-6yaQ.js";import"./VSlideGroup-iIdbSd4Y.js";const ct={class:"text-h5"},ut={class:"pa-4 d-flex justify-end gap-2"},mt={class:"border-table"},pt=t("thead",null,[t("tr",null,[t("th",{class:"text-subtitle-1 font-weight-semibold"},"Nome"),t("th",{class:"text-subtitle-1 font-weight-semibold"},"Data Nascimento"),t("th",{class:"text-subtitle-1 font-weight-semibold"},"Batizado"),t("th",{class:"text-subtitle-1 font-weight-semibold"},"Participação"),t("th",{class:"text-subtitle-1 font-weight-semibold"},"Nome do Líder"),t("th",{class:"text-subtitle-1 font-weight-semibold"},"Ação")])],-1),_t={class:"d-flex align-center"},ft={class:""},gt={class:"text-subtitle-1 font-weight-semibold text-no-wrap"},vt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},xt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},bt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},ht={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},Vt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},wt={class:"d-flex align-center"},Ct={class:"d-sm-flex justify-md-space-between align-center mt-3"},yt={class:"text-subtitle-1 text-grey100"},Pt=E({__name:"PessoasTabela",setup(q){const m=l(1),o=W(),y=X();var x=!1;if(y.params.id_user!=="new"){const a=o.state.filial.user;console.log(a.user),a.user.ds_funcao=="ADMIN"&&(x=!0)}K(()=>{o.dispatch("pessoas/getListaPessoasInicio")});const P=d({get:()=>o.state.pessoas.lista_pessoas_inicio,set:a=>o.state.pessoas.lista_pessoas_inicio=a});d({get:()=>o.state.pessoas.total_paginas,set:a=>o.state.pessoas.total_paginas=a}),d({get:()=>o.state.pessoas.pagina_atual,set:a=>o.state.pessoas.pagina_atual=a});const R=d({get:()=>o.state.pessoas.ultima_pagina,set:a=>o.state.pessoas.ultima_pagina=a}),b=d({get:()=>o.state.pessoas.data_pagina,set:a=>o.state.pessoas.data_pagina=a});function z(a){console.log("Página atual:",a),o.commit("pessoas/setCurrentPage",a),o.dispatch("pessoas/getListaPessoasInicio")}console.log(P.value.nome_pessoa);function S(a){return a==null?"#FFAE1F":"#13DEB9"}l(!0);const p=l(!1),h=l("");l(["primary","secondary","error","success","warning"]);const V=l(O),_=l(-1),f=l({avatar:D,nome_pessoa:"",sexo:"",data_nascimento:"",estado_civil:"",conjuge:"",entrada_igreja:"",usermail:""}),U=l({avatar:D,nome_pessoa:"",sexo:"",data_nascimento:"",estado_civil:"",conjuge:"",entrada_igreja:"",usermail:""});l([]),l(["Solteiro","Casado"]),l("Solteiro"),l("Solteiro"),d(()=>V.value.filter(a=>a.nome_pessoa.toLowerCase().includes(h.value.toLowerCase())));function $(a){console.log(a),L.fire({title:"Inativar cadastro",text:"Deseja realmente invativar o cadastro?",icon:"warning",showDenyButton:!0,confirmButtonText:"Inativar",denyButtonText:"Cancelar"}).then(n=>{n.isConfirmed?o.dispatch("pessoas/inativarCadastro",a).then(I=>{L.fire("Inativado com sucesso!","","success"),o.dispatch("pessoas/getListaPessoasInicio")}):n.isDenied})}function B(){p.value=!1,setTimeout(()=>{f.value=Object.assign({},U.value),_.value=-1},300)}function H(){_.value>-1?Object.assign(V.value[_.value],f.value):V.value.push(f.value),B()}const M=d(()=>_.value===-1?"Novo Cadastro":"Editar Cadastro");return(a,n)=>{const I=Y("TrashIcon");return u(),v(C,null,[e(it,null,{default:i(()=>[e(N,{cols:"12",lg:"4",md:"6"},{default:i(()=>[e(tt,{density:"compact",modelValue:h.value,"onUpdate:modelValue":n[0]||(n[0]=s=>h.value=s),label:"Pesquisar Pessoa","hide-details":"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(N,{cols:"12",lg:"8",md:"6",class:"text-right"},{default:i(()=>[e(et,{modelValue:p.value,"onUpdate:modelValue":n[2]||(n[2]=s=>p.value=s),"max-width":"500"},{default:i(()=>[e(F,null,{default:i(()=>[e(at,{class:"px-4 pt-6 justify-space-between d-flex align-center"},{default:i(()=>[t("span",ct,r(M.value),1),e(c,{onClick:n[1]||(n[1]=s=>p.value=!1),ripple:!1,density:"compact",icon:"mdi-close"})]),_:1}),t("div",ut,[e(ot),e(c,{color:"error",class:"px-3 rounded-pill",onClick:B},{default:i(()=>[g("Cancel")]),_:1}),e(c,{color:"primary",disabled:f.value.nome_pessoa=="",class:"px-3 rounded-pill",onClick:H},{default:i(()=>[g("Save")]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t("div",mt,[e(lt,{class:"mt-5"},{default:i(()=>[pt,t("tbody",null,[(u(!0),v(C,null,Z(P.value,s=>(u(),v("tr",{key:s.nr_sequencial},[t("td",null,[t("div",_t,[t("div",ft,[t("h4",gt,r(s.nome_pessoa),1),t("div",vt,"Sexo: "+r(s.sexo_pessoa),1)])])]),t("td",xt,r(new Date(s.dt_nascimento).toLocaleDateString("pt-BR")),1),t("td",bt,[e(j,{color:S(s.dt_batismo)},{default:i(()=>[g(r(s.dt_batismo?new Date(s.dt_batismo).toLocaleDateString("pt-BR"):"N/A"),1)]),_:2},1032,["color"])]),t("td",ht,[e(j,{color:S(s.tp_participacao)},{default:i(()=>[g(r(s.tp_participacao?s.tp_participacao:"N/A"),1)]),_:2},1032,["color"])]),t("td",Vt,r(s.nome_lider?s.nome_lider:"N/A"),1),t("td",null,[t("div",wt,[T(x)?(u(),G(A,{key:0,text:"Inativar"},{activator:i(({props:w})=>[e(c,k({icon:"",flat:"",onClick:St=>$(s)},w),{default:i(()=>[e(I,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024)):J("",!0),e(A,{text:"Ver Detalhes"},{activator:i(({props:w})=>[e(c,k({icon:"",flat:""},w,{to:"/pessoas/pessoa-perfil/"+s.nr_sequencial}),{default:i(()=>[e(T(Q),{"stroke-width":"1.5",size:"20",class:"text-info"})]),_:2},1040,["to"])]),_:2},1024)])])]))),128))])]),_:1})]),e(nt),t("div",Ct,[t("div",yt,"Exibindo "+r(b.value.from)+" até "+r(b.value.to)+" de "+r(b.value.total)+" registros",1),t("div",null,[e(rt,{modelValue:m.value,"onUpdate:modelValue":[n[3]||(n[3]=s=>m.value=s),z],"total-rows":10,rounded:"circle",density:"compact",class:"text-subtitle-1 text-grey100 my-4",length:R.value,"total-visible":7},null,8,["modelValue","length"])])])],64)}}}),ne=E({__name:"ListaPessoas",setup(q){const m=l({title:"Lista de Pessoas"}),o=l([{text:"Home",disabled:!1,href:"#"},{text:"Lista de Pessoas",disabled:!0,href:"#"}]);return(y,x)=>(u(),v(C,null,[e(dt,{title:m.value.title,breadcrumbs:o.value},null,8,["title","breadcrumbs"]),e(F,{elevation:"10"},{default:i(()=>[e(st,null,{default:i(()=>[e(Pt)]),_:1})]),_:1})],64))}});export{ne as default};
