import"./carousel.es-CH8W1hQz.js";import"./students-CKhcncKT.js";import{_ as L}from"./user-1-BBy47uA3.js";import{c as X}from"./students-BrP4-UJ6.js";import{s as E,B as i,a5 as Y,P as d,o as m,c as v,b as t,w as l,d as n,f as k,j as T,l as N,a as e,t as c,F as y,q as Z,u as tt,D as et,H as st,r as at}from"./index-8q7pL6ew.js";import{S as j}from"./sweetalert2.all-EhoRfdrk.js";import{V as F,a as ot}from"./VRow-BnnpBeQi.js";import{V as lt}from"./VTextField-BmiDtK9z.js";import{V as u}from"./VBtn-BjWyrVq1.js";import{e as w}from"./router-nJJuxJHh.js";import{V as A}from"./VTooltip-B1SkRTjZ.js";import{V as it}from"./VDialog-BGuE2ETE.js";import{V as R,a as rt,b as nt}from"./VCard-DBIbWr_Q.js";import{V as ct}from"./VSpacer-BVMaG7C3.js";import{V as q}from"./VChip-CYg66lWa.js";import{V as dt}from"./VTable-Cp769Vax.js";import{V as ut}from"./VDivider-mXiHkCWB.js";import{V as mt}from"./VPagination-4g2POAIX.js";import{B as pt}from"./BaseBreadcrumb-CE5SLj2T.js";import"./useRender-CNDZSt8y.js";import"./VField-D3JgwKyA.js";import"./index-DrIaegWl.js";import"./transition-jjIw1JEd.js";import"./VLabel-Ca3w9pxE.js";import"./VInput-CXlvbODZ.js";import"./forwardRefs-D3j0TLhE.js";import"./group-CXC93myL.js";import"./VProgressCircular-Dvt3tCX-.js";import"./resizeObserver-D64upIbG.js";import"./VOverlay-BI2h3FZJ.js";import"./lazy-Cm5qe7AD.js";import"./dialog-transition-3J_r5iPy.js";import"./VAvatar-C4DMIVUf.js";import"./VSlideGroup-CUioHPeW.js";const _t={class:"text-h5"},ft={class:"pa-4 d-flex justify-end gap-2"},gt={class:"border-table"},vt=e("thead",null,[e("tr",null,[e("th",{class:"text-subtitle-1 font-weight-semibold"},"Nome"),e("th",{class:"text-subtitle-1 font-weight-semibold"},"Data Nascimento"),e("th",{class:"text-subtitle-1 font-weight-semibold"},"Batizado"),e("th",{class:"text-subtitle-1 font-weight-semibold"},"Participação"),e("th",{class:"text-subtitle-1 font-weight-semibold"},"Nome do Líder"),e("th",{class:"text-subtitle-1 font-weight-semibold"},"Ação")])],-1),xt={class:"d-flex align-center"},ht={class:""},bt={class:"text-subtitle-1 font-weight-semibold text-no-wrap"},Vt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},wt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},yt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},Ct={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},Pt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},Bt={class:"d-flex align-center"},It={class:"d-sm-flex justify-md-space-between align-center mt-3"},St={class:"text-subtitle-1 text-grey100"},Dt=E({__name:"PessoasTabela",setup(U){const p=i(1),a=et(),C=st();var x=!1;if(C.params.id_user!=="new"){const s=a.state.filial.user;console.log(s.user),s.user.ds_funcao=="ADMIN"&&(x=!0)}Y(()=>{a.dispatch("pessoas/getListaPessoasInicio")});const P=d({get:()=>a.state.pessoas.lista_pessoas_inicio,set:s=>a.state.pessoas.lista_pessoas_inicio=s}),B=d({get:()=>a.state.pessoas.filters.nome_pessoa,set:s=>a.state.pessoas.filters.nome_pessoa=s});d({get:()=>a.state.pessoas.total_paginas,set:s=>a.state.pessoas.total_paginas=s}),d({get:()=>a.state.pessoas.pagina_atual,set:s=>a.state.pessoas.pagina_atual=s});const $=d({get:()=>a.state.pessoas.ultima_pagina,set:s=>a.state.pessoas.ultima_pagina=s}),h=d({get:()=>a.state.pessoas.data_pagina,set:s=>a.state.pessoas.data_pagina=s});function z(s){console.log("Página atual:",s),a.commit("pessoas/setCurrentPage",s),a.dispatch("pessoas/getListaPessoasInicio")}console.log(P.value.nome_pessoa);function I(s){return s==null?"#FFAE1F":"#13DEB9"}i(!0);const _=i(!1),H=i("");i(["primary","secondary","error","success","warning"]);const b=i(X),f=i(-1),g=i({avatar:L,nome_pessoa:"",sexo:"",data_nascimento:"",estado_civil:"",conjuge:"",entrada_igreja:"",usermail:""}),M=i({avatar:L,nome_pessoa:"",sexo:"",data_nascimento:"",estado_civil:"",conjuge:"",entrada_igreja:"",usermail:""}),V=i(!1);i([]),i(["Solteiro","Casado"]),i("Solteiro"),i("Solteiro"),d(()=>b.value.filter(s=>s.nome_pessoa.toLowerCase().includes(H.value.toLowerCase())));function O(s){console.log(s),j.fire({title:"Inativar cadastro",text:"Deseja realmente invativar o cadastro?",icon:"warning",showDenyButton:!0,confirmButtonText:"Inativar",denyButtonText:"Cancelar"}).then(r=>{r.isConfirmed?a.dispatch("pessoas/inativarCadastro",s).then(D=>{j.fire("Inativado com sucesso!","","success"),a.dispatch("pessoas/getListaPessoasInicio")}):r.isDenied})}function S(){_.value=!1,setTimeout(()=>{g.value=Object.assign({},M.value),f.value=-1},300)}function G(){f.value>-1?Object.assign(b.value[f.value],g.value):b.value.push(g.value),S()}function J(){V.value=!0,a.dispatch("pessoas/getListaPessoasInicio")}function K(){V.value=!1,a.commit("pessoas/limparFiltros"),a.dispatch("pessoas/getListaPessoasInicio")}const Q=d(()=>f.value===-1?"Novo Cadastro":"Editar Cadastro");return(s,r)=>{const D=at("TrashIcon");return m(),v(y,null,[t(ot,null,{default:l(()=>[t(F,{cols:"12",lg:"4",md:"6",class:"divPesquisa"},{default:l(()=>[t(lt,{class:"col-6 col-md-12",density:"compact",modelValue:B.value,"onUpdate:modelValue":r[0]||(r[0]=o=>B.value=o),label:"Pesquisar Pessoa","hide-details":"",variant:"outlined"},null,8,["modelValue"]),t(u,{class:"ml-2",color:"primary",rounded:"pill",onClick:J},{default:l(()=>[t(w,{class:"mr-2"},{default:l(()=>[n("mdi-magnify")]),_:1}),n("Pesquisar ")]),_:1}),V.value?(m(),k(u,{key:0,class:"ml-2",color:"light",rounded:"pill",onClick:K},{default:l(()=>[t(w,{class:"mr-2"},{default:l(()=>[n("mdi-close")]),_:1}),n("Limpar ")]),_:1})):T("",!0)]),_:1}),t(F,{cols:"12",lg:"8",md:"6",class:"text-right"},{default:l(()=>[t(A,{text:"Cadastrar Pessoas"},{activator:l(({props:o})=>[t(u,N({color:"primary"},o,{rounded:"pill",class:"ml-auto",to:"/pessoas/pessoas-detalhes/new"}),{default:l(()=>[t(w,{class:"mr-2"},{default:l(()=>[n("mdi-account-multiple-plus")]),_:1}),n("Adicionar Pessoa ")]),_:2},1040)]),_:1}),t(it,{modelValue:_.value,"onUpdate:modelValue":r[2]||(r[2]=o=>_.value=o),"max-width":"500"},{default:l(()=>[t(R,null,{default:l(()=>[t(rt,{class:"px-4 pt-6 justify-space-between d-flex align-center"},{default:l(()=>[e("span",_t,c(Q.value),1),t(u,{onClick:r[1]||(r[1]=o=>_.value=!1),ripple:!1,density:"compact",icon:"mdi-close"})]),_:1}),e("div",ft,[t(ct),t(u,{color:"error",class:"px-3 rounded-pill",onClick:S},{default:l(()=>[n("Cancel")]),_:1}),t(u,{color:"primary",disabled:g.value.nome_pessoa=="",class:"px-3 rounded-pill",onClick:G},{default:l(()=>[n("Save")]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e("div",gt,[t(dt,{class:"mt-5"},{default:l(()=>[vt,e("tbody",null,[(m(!0),v(y,null,Z(P.value,o=>(m(),v("tr",{key:o.nr_sequencial},[e("td",null,[e("div",xt,[e("div",ht,[e("h4",bt,c(o.nome_pessoa),1),e("div",Vt,"Sexo: "+c(o.sexo_pessoa),1)])])]),e("td",wt,c(new Date(o.dt_nascimento).toLocaleDateString("pt-BR")),1),e("td",yt,[t(q,{color:I(o.dt_batismo)},{default:l(()=>[n(c(o.dt_batismo?new Date(o.dt_batismo).toLocaleDateString("pt-BR"):"N/A"),1)]),_:2},1032,["color"])]),e("td",Ct,[t(q,{color:I(o.tp_participacao)},{default:l(()=>[n(c(o.tp_participacao?o.tp_participacao:"N/A"),1)]),_:2},1032,["color"])]),e("td",Pt,c(o.nome_lider?o.nome_lider:"N/A"),1),e("td",null,[e("div",Bt,[tt(x)?(m(),k(A,{key:0,text:"Inativar"},{activator:l(({props:W})=>[t(u,N({icon:"",flat:"",onClick:Lt=>O(o)},W),{default:l(()=>[t(D,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024)):T("",!0),t(u,{flat:"",class:"bg-lightprimary text-primary",to:"/pessoas/pessoa-perfil/"+o.nr_sequencial},{default:l(()=>[n(" Perfil ")]),_:2},1032,["to"])])])]))),128))])]),_:1})]),t(ut),e("div",It,[e("div",St,"Exibindo "+c(h.value.from)+" até "+c(h.value.to)+" de "+c(h.value.total)+" registros",1),e("div",null,[t(mt,{modelValue:p.value,"onUpdate:modelValue":[r[3]||(r[3]=o=>p.value=o),z],"total-rows":10,rounded:"circle",density:"compact",class:"text-subtitle-1 text-grey100 my-4",length:$.value,"total-visible":7},null,8,["modelValue","length"])])])],64)}}}),ue=E({__name:"ListaPessoas",setup(U){const p=i({title:"Lista de Pessoas"}),a=i([{text:"Home",disabled:!1,href:"#"},{text:"Lista de Pessoas",disabled:!0,href:"#"}]);return(C,x)=>(m(),v(y,null,[t(pt,{title:p.value.title,breadcrumbs:a.value},null,8,["title","breadcrumbs"]),t(R,{elevation:"10"},{default:l(()=>[t(nt,null,{default:l(()=>[t(Dt)]),_:1})]),_:1})],64))}});export{ue as default};
