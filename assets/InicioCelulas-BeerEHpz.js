import{_ as Z}from"./UiParentCard.vue_vue_type_script_setup_true_lang-CXsIHaS8.js";import{s as N,K as b,I as m,a2 as ee,J as le,o as h,c as q,b as e,w as l,d as o,t as _,u as C,dj as ae,dk as se,dl as te,a as g,f as J,j as z,d4 as oe,F as R,H as F,r as re,a7 as ne,dg as ue,q as ie}from"./index-Bw024mQT.js";import{S as ce}from"./sweetalert2.all-noFWlC9S.js";import{V as me}from"./VDialog-DNFXVFbU.js";import{a as de,d as fe,V as pe}from"./VCard-BurIhv8K.js";import{V as I}from"./VBtn-ASuYOgLF.js";import{V as _e}from"./VForm-DTTeuHbJ.js";import{c as M,V as H,a as K,b as G}from"./VExpansionPanel-CAHi5BS7.js";import{V as c}from"./VRow-C-ZGGDRe.js";import{V as t}from"./VCol-CZdmlAdH.js";import{V as u}from"./VLabel-DQTmENAK.js";import{V as A}from"./VSelect-D66aGMyE.js";import{V as E}from"./VTextField-Cp2_F8hb.js";import{V as ge}from"./VSpacer-DWiD3SXh.js";import{V as ve}from"./VAutocomplete-CJ-RL-bF.js";import{V as be}from"./VProgressCircular-DBaUMwAO.js";import{B as he}from"./BaseBreadcrumb-Cjo1Dldc.js";import"./VDivider-wYwdSntF.js";import"./router-C2Hg9w6c.js";import"./useRender-BuHo5KPJ.js";import"./VOverlay-Da8asCeF.js";import"./forwardRefs-D3j0TLhE.js";import"./lazy-vcQrf2r4.js";import"./transition-jlOABATi.js";import"./dialog-transition-BqCTkk6_.js";import"./VAvatar-DbN4NFk5.js";import"./group-D159tDXB.js";import"./VInput-DYCf8CCG.js";import"./index-C3UzUhyp.js";import"./VList-HsTh8ROU.js";import"./ssrBoot-D4iNL-0Y.js";import"./VMenu-DhayPVHb.js";import"./resizeObserver-C4_xe018.js";import"./VCheckboxBtn-BqkMQaiU.js";import"./VSelectionControl-Chg1oEhM.js";import"./VChip-Buv7TbgH.js";import"./VSlideGroup-s_ayvgqn.js";import"./VField-GI6pvz5G.js";import"./filter-SNf7aRIs.js";const Ve=g("span",{class:"text-h5"},"Registrar Célula",-1),xe=g("br",null,null,-1),Ce=g("br",null,null,-1),we=g("br",null,null,-1),ye=g("br",null,null,-1),Se=g("div",{class:"d-flex"},null,-1),qe={class:"pa-4 d-flex justify-end gap-2"},ke={key:0,class:"ml-5"},$e=N({__name:"HeaderCelula",setup(P){const r=F();ne(),ue();const d=b({get:()=>r.state.grupos.grupo.nr_seq_lider,set:s=>r.state.grupos.grupo.nr_seq_lider=s}),w=b({get:()=>r.state.celulas.celula.ofertas_voluntarias,set:s=>r.state.celulas.celula.ofertas_voluntarias=s}),y=b({get:()=>r.state.celulas.celula.obs_celula,set:s=>r.state.celulas.celula.obs_celula=s}),i=m([]),f=m(),V=b({get:()=>r.state.celulas.celula.nr_seq_grupo,set:s=>r.state.celulas.celula.nr_seq_grupo=s}),k=b({get:()=>r.state.celulas.celula.membros_presentes,set:s=>r.state.celulas.celula.membros_presentes=s}),$=b({get:()=>r.state.celulas.celula.nr_seq_celula,set:s=>r.state.celulas.celula.nr_seq_celula=s}),U=m([]);var S=m([]);const v=m(!1),O=m(""),Q=s=>{const a=s.target;O.value=a.value,S.value=[],v.value=!0,r.dispatch("pessoas/getListaPessoa",O.value).then(p=>{const n=p.data.listaPessoas.map(j=>({nr_sequencial:j.nr_sequencial,nome_pessoa:j.nome_pessoa}));S.value=n,v.value=!1}).catch(()=>{v.value=!1}),v.value=!1};function W(s){return console.log(s),`${D(s.dias_semana)} - ${s.horario} - ${s.sexo_participantes}`}function X(s){return`${s.nome_pessoa}`}ee(()=>{const s=localStorage.getItem("user");if(s){const a=JSON.parse(s);console.log(a);const p={nr_sequencial:a.user.nr_sequencial,nome_pessoa:a.user.nome_pessoa};S.value.push(p),d.value=a.user.nr_sequencial,T()}});function T(){r.dispatch("celulas/getCelulasLider",d.value).then(s=>{i.value=s.data,f.value=i.value,console.log(f.value)})}le($,s=>{s&&B(s)});function B(s){var p;const a=((p=s[0])==null?void 0:p.nr_sequencial)??$.value.nr_sequencial;r.dispatch("celulas/buscaMembros",a).then(n=>{U.value=n.data.membros_celula}),V.value=a}function D(s){if(s)try{const a=JSON.parse(s);return Array.isArray(a)?JSON.stringify(a).replace(/[\[\]]/g,"").replace(/"/g,""):"Sem informação"}catch{return"Sem informação"}else return"Sem dias disponíveis"}function Y(){r.dispatch("celulas/finalizarCelula").then(()=>{ce.fire({title:"Sucesso!",text:"Célula registrada com sucesso!",icon:"success"}),x.value=!1,B(f.value)})}const x=m(!1),L=m(!1);return(s,a)=>{const p=re("PlusIcon");return h(),q(R,null,[e(t,{cols:"12",lg:"12",md:"12",class:"text-right"},{default:l(()=>[e(me,{modelValue:x.value,"onUpdate:modelValue":a[7]||(a[7]=n=>x.value=n),"max-width":"700"},{default:l(()=>[e(de,null,{default:l(()=>[e(fe,{class:"px-4 pt-6 justify-space-between d-flex align-center"},{default:l(()=>[Ve,e(I,{onClick:a[0]||(a[0]=n=>x.value=!1),ripple:!1,density:"compact",icon:"mdi-close"})]),_:1}),e(pe,{class:"px-4"},{default:l(()=>[e(_e,{class:"dialog_form",ref:"form",modelValue:L.value,"onUpdate:modelValue":a[1]||(a[1]=n=>L.value=n),"lazy-validation":""},{default:l(()=>[e(M,null,{default:l(()=>[e(H,{elevation:"10"},{default:l(()=>[e(K,{class:"text-h6"},{default:l(()=>[o("Detalhes")]),_:1}),e(G,{class:"mt-4"},{default:l(()=>[e(c,null,{default:l(()=>[e(t,{cols:"12",md:"6"},{default:l(()=>[e(c,{class:"align-center mb-6"},{default:l(()=>[e(t,{cols:"12",sm:"3",class:"text-left"},{default:l(()=>[e(u,{class:"font-weight-medium",for:"clnm"},{default:l(()=>[o("Dias da Semana:")]),_:1}),xe,e(u,{class:"font-weight-light",for:"clnm"},{default:l(()=>[o(_(D(i.value[0].dias_semana)),1)]),_:1})]),_:1})]),_:1}),e(c,{class:"align-center mb-3"},{default:l(()=>[e(t,{cols:"12",sm:"3",class:"text-left"},{default:l(()=>[e(u,{class:"font-weight-medium",for:"clnm"},{default:l(()=>[o("Classificação:")]),_:1}),Ce,e(u,{class:"font-weight-light",for:"clnm"},{default:l(()=>[o(_(i.value[0].tipo_grupo),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(t,{cols:"12",md:"6"},{default:l(()=>[e(c,{class:"align-center mb-3"},{default:l(()=>[e(t,{cols:"12",sm:"3",class:"text-left"},{default:l(()=>[e(u,{class:"font-weight-medium",for:"clnm"},{default:l(()=>[o("Horário:")]),_:1}),we,e(u,{class:"font-weight-light",for:"clnm"},{default:l(()=>[o(_(i.value[0].horario),1)]),_:1})]),_:1})]),_:1}),e(c,{class:"align-center mb-3"},{default:l(()=>[e(t,{cols:"12",sm:"3",class:"text-left"},{default:l(()=>[e(u,{class:"font-weight-medium",for:"clnm"},{default:l(()=>[o("Sexo Participantes:")]),_:1}),ye,e(u,{class:"font-weight-light",for:"clnm"},{default:l(()=>[o(_(i.value[0].sexo_participantes),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(c,null,{default:l(()=>[e(t,{cols:"12",md:"12"},{default:l(()=>[Se]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(t,{cols:"12",lg:"12",md:"12",class:"text-right"},{default:l(()=>[e(c,{style:{padding:"10px"}},{default:l(()=>[e(t,{cols:"12",lg:"12",md:"6",class:"text-left"},{default:l(()=>[e(u,{class:"mb-2 font-weight-medium"},{default:l(()=>[o("Selecione as pessoas presentes:")]),_:1}),e(A,{modelValue:k.value,"onUpdate:modelValue":a[2]||(a[2]=n=>k.value=n),label:"Selecione as pessoas presentes",multiple:"",items:U.value,"item-title":X,"item-value":"abbr","return-object":"","single-line":"",variant:"outlined","hide-details":"",id:"vfcntry"},{"prepend-inner":l(()=>[e(C(ae),{"stroke-width":"1.5",size:"22",class:"text-medium-emphasis mr-3"})]),_:1},8,["modelValue","items"])]),_:1}),e(t,{cols:"12",lg:"12",md:"6",class:"text-left"},{default:l(()=>[e(u,{class:"mb-2 font-weight-medium"},{default:l(()=>[o("Valor das ofertas:")]),_:1}),e(E,{modelValue:w.value,"onUpdate:modelValue":a[3]||(a[3]=n=>w.value=n),variant:"outlined",placeholder:"R$",id:"fctime",type:"text",color:"primary"},{"prepend-inner":l(()=>[e(C(se),{"stroke-width":"1.5",size:"22",class:"text-medium-emphasis mr-3"})]),_:1},8,["modelValue"])]),_:1}),e(t,{cols:"12",lg:"12",md:"6",class:"text-left"},{default:l(()=>[e(u,{class:"mb-2 font-weight-medium"},{default:l(()=>[o("Observação:")]),_:1}),e(E,{modelValue:y.value,"onUpdate:modelValue":a[4]||(a[4]=n=>y.value=n),variant:"outlined",placeholder:"Observação",id:"fctime",type:"text",color:"primary"},{"prepend-inner":l(()=>[e(C(te),{"stroke-width":"1.5",size:"22",class:"text-medium-emphasis mr-3"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),g("div",qe,[e(ge),e(I,{color:"error",onClick:a[5]||(a[5]=n=>x.value=!1),class:"px-3 rounded-pill"},{default:l(()=>[o("Cancelar")]),_:1}),e(I,{color:"primary",class:"px-3 rounded-pill",onClick:a[6]||(a[6]=n=>Y())},{default:l(()=>[o("Registrar Célula")]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,{class:"align-center mb-3"},{default:l(()=>[e(t,{cols:"12",sm:"12"},{default:l(()=>[e(ve,{modelValue:d.value,"onUpdate:modelValue":a[8]||(a[8]=n=>d.value=n),label:"Buscar Líder da Célula",items:C(S),color:"primary",variant:"outlined","hide-details":"",onInput:Q,onChange:T,"item-title":"nome_pessoa","item-value":"nr_sequencial",loading:v.value},{"append-item":l(()=>[v.value?(h(),J(be,{key:0,class:"ml-5",indeterminate:"",color:"primary"})):z("",!0)]),"no-data":l(()=>[!v.value&&C(S).length===0?(h(),q("div",ke,"Nenhum dado encontrado")):z("",!0)]),_:1},8,["modelValue","items","loading"])]),_:1})]),_:1}),e(c,{class:"align-center mb-3"},{default:l(()=>[e(t,{cols:"12",sm:"9"},{default:l(()=>[e(A,{modelValue:$.value,"onUpdate:modelValue":a[9]||(a[9]=n=>$.value=n),label:"Suas Células",items:i.value,"item-title":W,"item-value":"abbr","return-object":"","single-line":"",variant:"outlined",onChange:B,"hide-details":"",id:"vfcntry"},{"prepend-inner":l(()=>[e(C(oe),{"stroke-width":"1.5",size:"22",class:"text-medium-emphasis mr-3"})]),_:1},8,["modelValue","items"])]),_:1}),e(t,{cols:"12",sm:"3"},{default:l(()=>[e(I,{color:"primary",class:"mt-sm-0 mt-3",flat:"",onClick:a[10]||(a[10]=n=>x.value=!0)},{default:l(()=>[e(p,{class:"mr-1"}),o(" Registrar Célula ")]),_:1})]),_:1})]),_:1})],64)}}}),Ie=g("h5",{class:"text-h5 mb-6 mt-3"},"Dados Célula",-1),Re=N({__name:"CollapsibleCelulas",setup(P){const r=F();m("1"),m("1"),m("1");const d=b({get:()=>r.state.celulas.dadosCelula,set:i=>r.state.celulas.dadosCelula=i});function w(i){if(i)try{const f=JSON.parse(i);return Array.isArray(f)?JSON.stringify(f).replace(/[\[\]]/g,"").replace(/"/g,""):"Sem informação"}catch{return"Sem informação"}else return"Sem dias disponíveis"}console.log(d);const y=i=>new Date(i).toLocaleString("pt-BR");return(i,f)=>(h(),q(R,null,[Ie,e(M,null,{default:l(()=>[(h(!0),q(R,null,ie(d.value,(V,k)=>(h(),J(H,{elevation:"10",class:"mb-3",key:k},{default:l(()=>[e(K,{class:"text-h6"},{default:l(()=>[o(_(y(V.data_celula))+" - "+_(w(V.dias_semana)),1)]),_:2},1024),e(G,{class:"mt-4"},{default:l(()=>[e(c,null,{default:l(()=>[e(t,{cols:"12",md:"6"},{default:l(()=>[e(c,{class:"align-center mb-3"},{default:l(()=>[e(t,{cols:"12",sm:"3",class:"pb-sm-3 pb-0 text-left"},{default:l(()=>[e(u,{class:"font-weight-medium",for:"clnm"},{default:l(()=>[o("Total Pessoas:")]),_:1})]),_:1}),e(t,{cols:"12",sm:"3",class:"pb-sm-3 pb-0 text-left"},{default:l(()=>[e(u,{class:"font-weight-bold",for:"clnm"},{default:l(()=>[o("12")]),_:1})]),_:1})]),_:1}),e(c,{class:"align-center mb-3"},{default:l(()=>[e(t,{cols:"12",sm:"3",class:"pb-sm-3 pb-0 text-left"},{default:l(()=>[e(u,{class:"font-weight-medium",for:"clnm"},{default:l(()=>[o("Ofertas Voluntárias:")]),_:1})]),_:1}),e(t,{cols:"12",sm:"3",class:"pb-sm-3 pb-0 text-left"},{default:l(()=>[e(u,{class:"font-weight-bold",for:"clnm"},{default:l(()=>[o("R$ "+_(V.ofertas_voluntarias),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(c,{class:"align-center mb-3"},{default:l(()=>[e(t,{cols:"12",sm:"3",class:"pb-sm-3 pb-0 text-left"},{default:l(()=>[e(u,{class:"font-weight-medium",for:"clnm"},{default:l(()=>[o("Observação:")]),_:1})]),_:1}),e(t,{cols:"12",sm:"3",class:"pb-sm-3 pb-0 text-left"},{default:l(()=>[e(u,{class:"font-weight-bold",for:"clnm"},{default:l(()=>[o("R$ "+_(V.obs_celula),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})],64))}}),gl=N({__name:"InicioCelulas",setup(P){const r=m({title:"Registrar Célula"}),d=m([{text:"Início",disabled:!1,href:"#"},{text:"Registrar Célula",disabled:!0,href:"#"}]);return m(null),(w,y)=>(h(),q(R,null,[e(he,{title:r.value.title,breadcrumbs:d.value},null,8,["title","breadcrumbs"]),e(c,null,{default:l(()=>[e(t,{cols:"12",md:"12"},{default:l(()=>[e(Z,{title:"Relatório semanal de grupos"},{default:l(()=>[e($e)]),_:1})]),_:1}),e(t,{cols:"12"},{default:l(()=>[e(Re)]),_:1})]),_:1})],64))}});export{gl as default};
