import{_ as A,$ as J,s as q,Z as G,K as h,I as d,o as x,c as g,b as e,w as t,l as C,d as V,a as o,t as u,F as U,q as K,r as w,cy as M,aG as T}from"./index-cm5CQck1.js";import{V as n}from"./VCol-BbWEsurH.js";import{V as r}from"./VTextField-CL_FkUCP.js";import{V as Z}from"./VDialog-C0BQbp54.js";import{V as m}from"./VBtn-WOeWvKW5.js";import{a as H}from"./router-6K5-h50T.js";import{a as Q,d as W,V as X}from"./VCard-DHNReyGA.js";import{V as Y}from"./VForm-BDf_LogT.js";import{V as j}from"./VRow-BQzs-YKQ.js";import{V as ee}from"./VSelect-DMPFlSRx.js";import{V as le}from"./VSpacer-lU84vlvA.js";import{V as te}from"./VTable-CG7aS8IK.js";import{a as ae}from"./VAvatar-qtwk4po4.js";import{V as oe}from"./VChip-D_uIp1hb.js";import{V as S}from"./VTooltip-FtXV7k8n.js";const se=A({id:"Contact",state:()=>({contacts:[]}),getters:{},actions:{async fetchContacts(){try{const f=await J.get("/api/contacts");this.contacts=f.data.contacts}catch(f){alert(f),console.log(f)}}}}),ne={class:"text-h5"},de={class:"pa-4 d-flex justify-end gap-2"},ie={class:"border-table"},ue=o("thead",null,[o("tr",null,[o("th",{class:"text-subtitle-1 font-weight-semibold"},"Id"),o("th",{class:"text-subtitle-1 font-weight-semibold"},"UserInfo"),o("th",{class:"text-subtitle-1 font-weight-semibold"},"Phone"),o("th",{class:"text-subtitle-1 font-weight-semibold"},"Joining Date"),o("th",{class:"text-subtitle-1 font-weight-semibold"},"Role"),o("th",{class:"text-subtitle-1 font-weight-semibold"},"Actions")])],-1),re={class:"text-subtitle-1"},ce={class:"d-flex align-center"},me={class:"ml-5"},fe={class:"text-subtitle-1 font-weight-semibold text-no-wrap"},pe={class:"text-subtitle-1 d-block mt-1 textSecondary"},ve={class:"text-subtitle-1"},Ve={class:"text-subtitle-1"},_e={class:"d-flex align-center"},Oe=q({__name:"EditableTable",setup(f){const y=se();G(()=>{y.fetchContacts()}),h(()=>y.contacts);const I=d(!0),p=d(!1),_=d(""),B=d(["primary","secondary","error","success","warning"]),c=d(M),v=d(-1),s=d({id:"",avatar:T,userinfo:"",usermail:"",phone:"",jdate:"",role:"",rolestatus:""}),D=d({id:"",avatar:T,userinfo:"",usermail:"",phone:"",jdate:"",role:"",rolestatus:""}),O=h(()=>c.value.filter(i=>i.userinfo.toLowerCase().includes(_.value.toLowerCase())));function P(i){v.value=c.value.indexOf(i),s.value=Object.assign({},i),p.value=!0}function z(i){const a=c.value.indexOf(i);confirm("Are you sure you want to delete this item?")&&c.value.splice(a,1)}function k(){p.value=!1,setTimeout(()=>{s.value=Object.assign({},D.value),v.value=-1},300)}function E(){v.value>-1?Object.assign(c.value[v.value],s.value):c.value.push(s.value),k()}const F=h(()=>v.value===-1?"New Contact":"Edit Contact");return(i,a)=>{const L=w("PencilIcon"),N=w("TrashIcon"),R=w("perfect-scrollbar");return x(),g(U,null,[e(j,null,{default:t(()=>[e(n,{cols:"12",lg:"4",md:"6"},{default:t(()=>[e(r,{density:"compact",modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=l=>_.value=l),label:"Search Contacts","hide-details":"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",lg:"8",md:"6",class:"text-right"},{default:t(()=>[e(Z,{modelValue:p.value,"onUpdate:modelValue":a[10]||(a[10]=l=>p.value=l),"max-width":"500"},{activator:t(({props:l})=>[e(m,C({color:"primary"},l,{rounded:"pill",class:"ml-auto"}),{default:t(()=>[e(H,{class:"mr-2"},{default:t(()=>[V("mdi-account-multiple-plus")]),_:1}),V("Add Contact ")]),_:2},1040)]),default:t(()=>[e(Q,null,{default:t(()=>[e(W,{class:"px-4 pt-6 justify-space-between d-flex align-center"},{default:t(()=>[o("span",ne,u(F.value),1),e(m,{onClick:a[1]||(a[1]=l=>p.value=!1),ripple:!1,density:"compact",icon:"mdi-close"})]),_:1}),e(X,{class:"px-4"},{default:t(()=>[e(Y,{class:"dialog_form",ref:"form",modelValue:I.value,"onUpdate:modelValue":a[9]||(a[9]=l=>I.value=l),"lazy-validation":""},{default:t(()=>[e(j,null,{default:t(()=>[e(n,{cols:"12",sm:"6"},{default:t(()=>[e(r,{variant:"outlined","hide-details":"",modelValue:s.value.id,"onUpdate:modelValue":a[2]||(a[2]=l=>s.value.id=l),label:"Id"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",sm:"6"},{default:t(()=>[e(r,{variant:"outlined","hide-details":"",modelValue:s.value.userinfo,"onUpdate:modelValue":a[3]||(a[3]=l=>s.value.userinfo=l),label:"User info"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",sm:"6"},{default:t(()=>[e(r,{variant:"outlined","hide-details":"",modelValue:s.value.usermail,"onUpdate:modelValue":a[4]||(a[4]=l=>s.value.usermail=l),label:"User email",type:"email"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",sm:"6"},{default:t(()=>[e(r,{variant:"outlined","hide-details":"",modelValue:s.value.phone,"onUpdate:modelValue":a[5]||(a[5]=l=>s.value.phone=l),label:"Phone",type:"phone"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",sm:"6"},{default:t(()=>[e(r,{variant:"outlined","hide-details":"",modelValue:s.value.jdate,"onUpdate:modelValue":a[6]||(a[6]=l=>s.value.jdate=l),label:"Joining Date"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",sm:"6"},{default:t(()=>[e(r,{variant:"outlined","hide-details":"",modelValue:s.value.role,"onUpdate:modelValue":a[7]||(a[7]=l=>s.value.role=l),label:"Role"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",sm:"12"},{default:t(()=>[e(ee,{variant:"outlined","hide-details":"",items:B.value,modelValue:s.value.rolestatus,"onUpdate:modelValue":a[8]||(a[8]=l=>s.value.rolestatus=l),label:"Role Background"},null,8,["items","modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),o("div",de,[e(le),e(m,{onClick:k,class:"bg-error px-3 rounded-pill"},{default:t(()=>[V("Cancel")]),_:1}),e(m,{color:"primary",disabled:s.value.userinfo==""||s.value.usermail=="",class:"px-3 rounded-pill",onClick:E},{default:t(()=>[V("Save")]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(R,{class:"no-scrollbar"},{default:t(()=>[o("div",ie,[e(te,{class:"mt-5"},{default:t(()=>[ue,o("tbody",null,[(x(!0),g(U,null,K(O.value,l=>(x(),g("tr",{key:l.id},[o("td",re,u(l.id),1),o("td",null,[o("div",ce,[o("div",null,[e(ae,{src:l.avatar,width:"45px",class:"rounded-circle img-fluid"},null,8,["src"])]),o("div",me,[o("h4",fe,u(l.userinfo),1),o("span",pe,u(l.usermail),1)])])]),o("td",ve,u(l.phone),1),o("td",Ve,u(l.jdate),1),o("td",null,[e(oe,{rounded:"pill",color:l.rolestatus,size:"small",label:""},{default:t(()=>[V(u(l.role),1)]),_:2},1032,["color"])]),o("td",null,[o("div",_e,[e(S,{text:"Edit"},{activator:t(({props:b})=>[e(m,C({icon:"",flat:"",onClick:$=>P(l)},b),{default:t(()=>[e(L,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1024),e(S,{text:"Delete"},{activator:t(({props:b})=>[e(m,C({icon:"",flat:"",onClick:$=>z(l)},b),{default:t(()=>[e(N,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024)])])]))),128))])]),_:1})])]),_:1})],64)}}});export{Oe as _};
