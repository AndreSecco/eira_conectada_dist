import"./carousel.es-D8astV_M.js";import"./students-B0eFZBVL.js";import{_ as L}from"./user-1-BBy47uA3.js";import{c as W}from"./students-BVojxZRV.js";import{s as q,B as i,a6 as X,P as d,o as m,c as v,b as t,w as l,d as n,f as k,j as T,l as N,a as e,t as c,F as y,q as Y,u as Z,D as tt,H as et,r as st}from"./index-BWNHnGrY.js";import{S as j}from"./sweetalert2.all-pmRn1qHI.js";import{V as F,a as at}from"./VRow-BNiOMoJY.js";import{V as ot}from"./VTextField-sP6lEpmD.js";import{V as u}from"./VBtn-8fu84Qct.js";import{e as w}from"./router-Q6lkbXYz.js";import{V as lt}from"./VDialog-ClTvFVJb.js";import{V as E,a as it,b as rt}from"./VCard-ZS3Cjikf.js";import{V as nt}from"./VSpacer-KCRE7Mdb.js";import{V as A}from"./VChip-x0gaJnQb.js";import{V as ct}from"./VTooltip-B1BsKDmn.js";import{V as dt}from"./VTable-C7OD6j9f.js";import{V as ut}from"./VDivider-DeRbl8WX.js";import{V as mt}from"./VPagination-BvqcLLNn.js";import{B as pt}from"./BaseBreadcrumb-dN7PP8z8.js";import"./useRender-FjPIpH-6.js";import"./VField-CwsYRjZU.js";import"./index-COPjBdTO.js";import"./transition-DVW8c0E3.js";import"./VLabel-LkWPtI96.js";import"./VInput-BLVKKAFu.js";import"./forwardRefs-D3j0TLhE.js";import"./group-B2LcQb29.js";import"./VProgressCircular-D7lJ4Pu6.js";import"./resizeObserver-CmmHuJZN.js";import"./VOverlay-B_j6ITRg.js";import"./lazy-Bor3w-M5.js";import"./dialog-transition-C1jXuX8L.js";import"./VAvatar-C0kOQC4u.js";import"./VSlideGroup-D4BVfi_9.js";const _t={class:"text-h5"},ft={class:"pa-4 d-flex justify-end gap-2"},gt={class:"border-table"},vt=e("thead",null,[e("tr",null,[e("th",{class:"text-subtitle-1 font-weight-semibold"},"Nome"),e("th",{class:"text-subtitle-1 font-weight-semibold"},"Data Nascimento"),e("th",{class:"text-subtitle-1 font-weight-semibold"},"Batizado"),e("th",{class:"text-subtitle-1 font-weight-semibold"},"Participação"),e("th",{class:"text-subtitle-1 font-weight-semibold"},"Nome do Líder"),e("th",{class:"text-subtitle-1 font-weight-semibold"},"Ação")])],-1),xt={class:"d-flex align-center"},ht={class:""},bt={class:"text-subtitle-1 font-weight-semibold text-no-wrap"},Vt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},wt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},yt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},Ct={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},Pt={class:"text-subtitle-1 textSecondary text-no-wrap mt-1"},Bt={class:"d-flex align-center"},It={class:"d-sm-flex justify-md-space-between align-center mt-3"},St={class:"text-subtitle-1 text-grey100"},Dt=q({__name:"PessoasTabela",setup(R){const p=i(1),a=tt(),C=et();var x=!1;if(C.params.id_user!=="new"){const s=a.state.filial.user;console.log(s.user),s.user.ds_funcao=="ADMIN"&&(x=!0)}X(()=>{a.dispatch("pessoas/getListaPessoasInicio")});const P=d({get:()=>a.state.pessoas.lista_pessoas_inicio,set:s=>a.state.pessoas.lista_pessoas_inicio=s}),B=d({get:()=>a.state.pessoas.filters.nome_pessoa,set:s=>a.state.pessoas.filters.nome_pessoa=s});d({get:()=>a.state.pessoas.total_paginas,set:s=>a.state.pessoas.total_paginas=s}),d({get:()=>a.state.pessoas.pagina_atual,set:s=>a.state.pessoas.pagina_atual=s});const U=d({get:()=>a.state.pessoas.ultima_pagina,set:s=>a.state.pessoas.ultima_pagina=s}),h=d({get:()=>a.state.pessoas.data_pagina,set:s=>a.state.pessoas.data_pagina=s});function $(s){console.log("Página atual:",s),a.commit("pessoas/setCurrentPage",s),a.dispatch("pessoas/getListaPessoasInicio")}console.log(P.value.nome_pessoa);function I(s){return s==null?"#FFAE1F":"#13DEB9"}i(!0);const _=i(!1),z=i("");i(["primary","secondary","error","success","warning"]);const b=i(W),f=i(-1),g=i({avatar:L,nome_pessoa:"",sexo:"",data_nascimento:"",estado_civil:"",conjuge:"",entrada_igreja:"",usermail:""}),H=i({avatar:L,nome_pessoa:"",sexo:"",data_nascimento:"",estado_civil:"",conjuge:"",entrada_igreja:"",usermail:""}),V=i(!1);i([]),i(["Solteiro","Casado"]),i("Solteiro"),i("Solteiro"),d(()=>b.value.filter(s=>s.nome_pessoa.toLowerCase().includes(z.value.toLowerCase())));function M(s){console.log(s),j.fire({title:"Inativar cadastro",text:"Deseja realmente invativar o cadastro?",icon:"warning",showDenyButton:!0,confirmButtonText:"Inativar",denyButtonText:"Cancelar"}).then(r=>{r.isConfirmed?a.dispatch("pessoas/inativarCadastro",s).then(D=>{j.fire("Inativado com sucesso!","","success"),a.dispatch("pessoas/getListaPessoasInicio")}):r.isDenied})}function S(){_.value=!1,setTimeout(()=>{g.value=Object.assign({},H.value),f.value=-1},300)}function O(){f.value>-1?Object.assign(b.value[f.value],g.value):b.value.push(g.value),S()}function G(){V.value=!0,a.dispatch("pessoas/getListaPessoasInicio")}function J(){V.value=!1,a.commit("pessoas/limparFiltros"),a.dispatch("pessoas/getListaPessoasInicio")}const K=d(()=>f.value===-1?"Novo Cadastro":"Editar Cadastro");return(s,r)=>{const D=st("TrashIcon");return m(),v(y,null,[t(at,null,{default:l(()=>[t(F,{cols:"12",lg:"4",md:"6",class:"divPesquisa"},{default:l(()=>[t(ot,{class:"col-6 col-md-12",density:"compact",modelValue:B.value,"onUpdate:modelValue":r[0]||(r[0]=o=>B.value=o),label:"Pesquisar Pessoa","hide-details":"",variant:"outlined"},null,8,["modelValue"]),t(u,{class:"ml-2",color:"primary",rounded:"pill",onClick:G},{default:l(()=>[t(w,{class:"mr-2"},{default:l(()=>[n("mdi-magnify")]),_:1}),n("Pesquisar ")]),_:1}),V.value?(m(),k(u,{key:0,class:"ml-2",color:"light",rounded:"pill",onClick:J},{default:l(()=>[t(w,{class:"mr-2"},{default:l(()=>[n("mdi-close")]),_:1}),n("Limpar ")]),_:1})):T("",!0)]),_:1}),t(F,{cols:"12",lg:"8",md:"6",class:"text-right"},{default:l(()=>[t(lt,{modelValue:_.value,"onUpdate:modelValue":r[2]||(r[2]=o=>_.value=o),"max-width":"500"},{activator:l(({props:o})=>[t(u,N({color:"primary"},o,{rounded:"pill",class:"ml-auto",to:"/pessoas/pessoas-detalhes/new"}),{default:l(()=>[t(w,{class:"mr-2"},{default:l(()=>[n("mdi-account-multiple-plus")]),_:1}),n("Adicionar Pessoa ")]),_:2},1040)]),default:l(()=>[t(E,null,{default:l(()=>[t(it,{class:"px-4 pt-6 justify-space-between d-flex align-center"},{default:l(()=>[e("span",_t,c(K.value),1),t(u,{onClick:r[1]||(r[1]=o=>_.value=!1),ripple:!1,density:"compact",icon:"mdi-close"})]),_:1}),e("div",ft,[t(nt),t(u,{color:"error",class:"px-3 rounded-pill",onClick:S},{default:l(()=>[n("Cancel")]),_:1}),t(u,{color:"primary",disabled:g.value.nome_pessoa=="",class:"px-3 rounded-pill",onClick:O},{default:l(()=>[n("Save")]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e("div",gt,[t(dt,{class:"mt-5"},{default:l(()=>[vt,e("tbody",null,[(m(!0),v(y,null,Y(P.value,o=>(m(),v("tr",{key:o.nr_sequencial},[e("td",null,[e("div",xt,[e("div",ht,[e("h4",bt,c(o.nome_pessoa),1),e("div",Vt,"Sexo: "+c(o.sexo_pessoa),1)])])]),e("td",wt,c(new Date(o.dt_nascimento).toLocaleDateString("pt-BR")),1),e("td",yt,[t(A,{color:I(o.dt_batismo)},{default:l(()=>[n(c(o.dt_batismo?new Date(o.dt_batismo).toLocaleDateString("pt-BR"):"N/A"),1)]),_:2},1032,["color"])]),e("td",Ct,[t(A,{color:I(o.tp_participacao)},{default:l(()=>[n(c(o.tp_participacao?o.tp_participacao:"N/A"),1)]),_:2},1032,["color"])]),e("td",Pt,c(o.nome_lider?o.nome_lider:"N/A"),1),e("td",null,[e("div",Bt,[Z(x)?(m(),k(ct,{key:0,text:"Inativar"},{activator:l(({props:Q})=>[t(u,N({icon:"",flat:"",onClick:Lt=>M(o)},Q),{default:l(()=>[t(D,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1024)):T("",!0),t(u,{flat:"",class:"bg-lightprimary text-primary",to:"/pessoas/pessoa-perfil/"+o.nr_sequencial},{default:l(()=>[n(" Perfil ")]),_:2},1032,["to"])])])]))),128))])]),_:1})]),t(ut),e("div",It,[e("div",St,"Exibindo "+c(h.value.from)+" até "+c(h.value.to)+" de "+c(h.value.total)+" registros",1),e("div",null,[t(mt,{modelValue:p.value,"onUpdate:modelValue":[r[3]||(r[3]=o=>p.value=o),$],"total-rows":10,rounded:"circle",density:"compact",class:"text-subtitle-1 text-grey100 my-4",length:U.value,"total-visible":7},null,8,["modelValue","length"])])])],64)}}}),ue=q({__name:"ListaPessoas",setup(R){const p=i({title:"Lista de Pessoas"}),a=i([{text:"Home",disabled:!1,href:"#"},{text:"Lista de Pessoas",disabled:!0,href:"#"}]);return(C,x)=>(m(),v(y,null,[t(pt,{title:p.value.title,breadcrumbs:a.value},null,8,["title","breadcrumbs"]),t(E,{elevation:"10"},{default:l(()=>[t(rt,null,{default:l(()=>[t(Dt)]),_:1})]),_:1})],64))}});export{ue as default};
